(this["webpackJsonpconquest-of-hell-idle"]=this["webpackJsonpconquest-of-hell-idle"]||[]).push([[0],{108:function(e){e.exports=JSON.parse('{"name":"conquest-of-hell-idle","version":"0.1.0","private":true,"homepage":"/hell-conquest-idle/","dependencies":{"@material-ui/core":"^4.11.1","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","big.js":"6.0.3","cypress":"^6.1.0","md5":"^2.3.0","node-uuid":"^1.4.8","react":"^17.0.1","react-circular-progressbar":"^2.0.3","react-dom":"^17.0.1","react-hotkeys-hook":"^2.4.0","react-redux":"^7.2.2","react-router-dom":"^5.2.0","react-scripts":"4.0.1","react-three-fiber":"^5.3.3","redux":"^4.0.5","seedrandom":"^3.0.5","three":"^0.122.0","tween.js":"^16.6.0","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},116:function(e,t,n){},189:function(e,t,n){},194:function(e,t){},196:function(e,t){},207:function(e,t){},209:function(e,t){},236:function(e,t){},238:function(e,t){},239:function(e,t){},244:function(e,t){},246:function(e,t){},265:function(e,t){},277:function(e,t){},280:function(e,t){},295:function(e,t){},301:function(e){e.exports=JSON.parse('{"0.1.0":["Initial version"]}')},302:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),c=n(13),s=n.n(c),o=(n(189),n(15)),u=n(66),l=n(18),d=(n(116),n(19)),m=n(6),b=(n(283),n(39)),h=n(40),g=n(31),p=n(44),j=n.n(p),f=n(83),x={bloodthirstyKnight:{name:"Bloodthirsty Knight",traits:["bloodrage"],appearance:"bloodthirstyKnight",texture:"01_warrior.png",description:"A ruthless warrior who delighted in slaughtering whoever they encounter on the battlefield."},rapaciousHighwayman:{name:"Rapacious Highwayman",traits:["cupidity"],enabled:!1,appearance:"rapaciousHighwayman",texture:"02_hunter.png",description:"A thief who stole from whomever he could get away with, from wealthy merchants to starving vagrants."},condemnedSlasher:{name:"Condemned Slasher",traits:["murderousFrenzy"],appearance:"condemnedSlasher",texture:"03_rogue.png",description:"A madman who gained exquisite pleasure from seeing how many cuts could be made in a victim's body before they died."},crushingSnake:{name:"Crushing Snake",traits:["inescapableGrasp"],appearance:"crushingSnake",texture:"06_snake_01.png",description:"A monstrous reptile which"},skitteringHorror:{name:"Skittering Horror",traits:["terrifyingSkitter"],appearance:"skitteringHorror",texture:"10_spider.png",description:"A massive spider that enjoys stalking its prey, frightening it by the sickening skittering of it's arachnid legs."},deadlyHornet:{name:"Deadly Hornet",traits:["piercingStrike"],appearance:"deadlyHornet",texture:"12_wasp.png",description:"An insect whose stinger is able to pierce even metal protection."}};function O(e){if(!x[e])throw new Error("No creature with id ".concat(e," is defined"))}var v={bloodrage:{name:"Blood Rage",icon:"icons/icons-139.png",description:m.template("This demon's unquenchable thirst for blood gives a <span style='color: red'>${rank.times(10)}%</span> bonus to Damage against enemies with <span style='color: red'>50% or less</span> health."),on_hitting:{conditions:{health_percentage:{target:"target",below:50}},effects:{damage_modifier:{percent:"$rank.times(10)"}}}},cupidity:{name:"Cupidity",icon:"icons/icons-2503.png",description:m.template("When this demon successfully Intimidates another demon, it gains a <span style='color: red'>${rank}%</span> chance to seize the intimidated demon's Artifacts as though it were killed."),on_intimidate:{conditions:{chance:"$rank"},effects:{steal_item_chance:{target:"enemies"}}}},murderousFrenzy:{name:"Murderous Frenzy",icon:"icons/icons-118.png",description:m.template("After hitting an enemy with an attack this Demon frenzies, gaining a <span style='color: orangered'>${rank}%</span> bonus to <span style='color: lightgreen'>Attack Speed</span> for 2 rounds."),on_hitting:{effects:{add_modifier:{speed:{target:"attacker",percent:"$rank"}}},duration:{rounds:2}}},inescapableGrasp:{name:"Inescapable Grasp",icon:"icons/icons-2221.png",description:m.template("You bind your victims when you strike, causing a <span style='color: orangered'>${rank}%</span> penalty to their <span style='color: lightgreen'>Action Speed</span> for 5 rounds."),on_hitting:{effects:{add_modifier:{speed:{target:"attacked",percent:"$rank.times(-1)"}}},duration:{rounds:5}}},terrifyingSkitter:{name:"Terrifying Skitter",icon:"icons/icons-2260.png",description:m.template("The sickening sound of your feet on the ground unnerves even other demons, giving a <span style='color: orangered'>75%</span> chance to make the enemy <span style='color: violet'>Terrified</span> for <span style='color: lightblue'>${rank.div(10).round(0, 0).plus(1).toFixed()}</span> round(s), stunning them."),on_combat_start:{conditions:{chance:50},effects:{add_modifier:{stunned:{target:"all_enemies"}}},duration:{rounds:"$rank.div(10).round(0, 0).plus(1)"}}},piercingStrike:{name:"Piercing Strike",icon:"icons/icons-113.png",description:m.template("Your relentless attacks are designed to get around the enemy's defenses. Against your attacks the enemy's <span style='color: lightgreen'>Defense</span> is reduced by <span style='color: orangered'>${rank}%</span>"),on_hitting:{effects:{defense_modifier:{percent:"$rank.times(-1)"}}}}};function y(e){return v[e]}console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEBUG_MODE,typeof Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEBUG_MODE);var w={manualSpeedup:{enabled:!0,multiplier:2},artifacts:{enabled:Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FEATURE_ARTIFACTS_ENABLED||!1},actionLog:{maxSize:Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MAX_ACTIONLOG_SIZE||20},encounters:{lesserLevelScale:2,greaterLevelScale:1},characters:{player:{attributesPerLevel:2}},mechanics:{attack:{baseAttribute:"deceit",scale:2},defense:{baseAttribute:"brutality",scale:1},evasion:{baseAttribute:"cunning",scale:2},attackDamage:{pointsPerLevel:5,baseAttribute:"brutality",scale:2},traitRank:{baseAttribute:"madness",scale:2},fatigue:{penaltyPerPoint:2},hp:{pointsPerLevel:25,healingPerLevel:25}},attributes:{brutality:{label:"Brutality",globalScaling:1,description:m.template("Brutality is how savage and ruthless a Demon is. It gives a ${2 * rank}% bonus to attack damage, defense and intimidation checks."),icon:"icons/icons-92.png"},cunning:{label:"Cunning",globalScaling:1,description:m.template("Cunning is how quick thinking a Demon is. It gives a ${2 * rank}% bonus to Evasion, and non-combat encounters."),icon:"icons/icons-24.png"},deceit:{label:"Deceit",globalScaling:1,description:m.template("Deceit is how underhanded and manipulative a Demon is. It gives a ${2 * rank}% bonus to Accuracy and social encounters."),icon:"icons/icons-17.png"},madness:{label:"Madness",globalScaling:1,description:m.template("Madness is how disconnected from the limits of reality the Demon is. It gives a ${5 * rank}% bonus to the effect of wielded Artifacts and the effects of Traits."),icon:"icons/icons-124.png"}},combat:{attributeDamageModifier:.02,defaultMinimumDamageMultiplier:.5,defaultMedianDamageMultiplier:1,defaultMaximumDamageMultiplier:1.5,baseMinimumDamageWeight:20,baseMedianDamageWeight:60,baseMaximumDamageWeight:20},debug:"true"===Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEBUG_MODE};function k(){w.debug&&console.debug.apply(null,arguments)}var _=n(4),S=n.n(_),A=function(){function e(t){Object(b.a)(this,e),this._isPc=t.isPc||t._isPc,this.id=t.id,this._name=t.name||t._name,this._absorbedPower=Object(_.Big)(t.absorbedPower||t._absorbedPower||0),this._currentHp=Object(_.Big)(t._currentHp||this.maximumHp),this._attributes=new D(t.attributes||t._attributes),this._combat=new L(t.combat||t._combat,this),this._traits=Object.keys(t.traits||t._traits).reduce((function(e,n){return e[n]=Object(_.Big)((t.traits||t._traits)[n]),e}),{}),this._appearance=t.appearance||t._appearance,this._modifiers=t.modifiers||t._modifiers||[]}return Object(h.a)(e,[{key:"reincarnate",value:function(e,t){this._appearance=e,this._traits=t}},{key:"otherDemonIsGreaterDemon",value:function(e){return e.powerLevel.gte(this.powerLevel.plus(w.encounters.greaterLevelScale))}},{key:"otherDemonIsLesserDemon",value:function(e){return e.powerLevel.lte(this.powerLevel.minus(w.encounters.lesserLevelScale))}},{key:"gainPower",value:function(e){var t=this;this._absorbedPower=this._absorbedPower.plus(e),x[this.appearance].traits.forEach((function(e){t._traits[e]=z(t._absorbedPower)}))}},{key:"addModifier",value:function(e){this._modifiers.push(e)}},{key:"isPc",get:function(){return this._isPc}},{key:"name",get:function(){return this._name}},{key:"powerLevel",get:function(){return z(this._absorbedPower)}},{key:"currentHp",get:function(){return this._currentHp},set:function(e){this.maximumHp.lt(e)?this._currentHp=this.maximumHp:this._currentHp=e}},{key:"alive",get:function(){return this.currentHp>0}},{key:"maximumHp",get:function(){return this.powerLevel.mul(w.mechanics.hp.pointsPerLevel).plus(this._isPc?5:0)}},{key:"attributes",get:function(){return this._attributes}},{key:"combat",get:function(){return this._combat}},{key:"traits",get:function(){return this._traits},set:function(e){this._traits=e}},{key:"appearance",get:function(){return this._appearance}},{key:"healing",get:function(){return Object(_.Big)(this.powerLevel.times(w.mechanics.hp.healingPerLevel))}},{key:"absorbedPower",get:function(){return this._absorbedPower},set:function(e){var t=this;this._absorbedPower=e,this.appearance&&x[this.appearance].traits.forEach((function(e){t._traits[e]=z(t._absorbedPower)}))}},{key:"speed",get:function(){return Object(_.Big)(100)}},{key:"modifiers",get:function(){return this._modifiers}}]),e}(),D=function(){function e(t){Object(b.a)(this,e),this._brutality=t.brutality||t._brutality||0,this._cunning=t.cunning||t._cunning||0,this._deceit=t.deceit||t._deceit||0,this._madness=t.madness||t._madness||0}return Object(h.a)(e,[{key:"brutality",get:function(){return this._brutality}},{key:"cunning",get:function(){return this._cunning}},{key:"deceit",get:function(){return this._deceit}},{key:"madness",get:function(){return this._madness}}]),e}(),L=function(){function e(t,n){Object(b.a)(this,e),this.character=function(){return n},this.fatigue=0}return Object(h.a)(e,[{key:"minimumDamageWeight",get:function(){return Object(_.Big)(w.combat.baseMinimumDamageWeight)}},{key:"medianDamageWeight",get:function(){return Object(_.Big)(w.combat.baseMedianDamageWeight)}},{key:"maximumDamageWeight",get:function(){return Object(_.Big)(w.combat.baseMaximumDamageWeight)}},{key:"minimumDamage",get:function(){var e=this.character().powerLevel,t=w.combat.defaultMinimumDamageMultiplier,n=this.character().attributes.brutality*w.combat.attributeDamageModifier;return e.times(w.mechanics.attackDamage.pointsPerLevel).times(t).times(1+n).round(0,3)}},{key:"medianDamage",get:function(){var e=this.character().powerLevel,t=w.combat.defaultMedianDamageMultiplier,n=this.character().attributes.brutality*w.combat.attributeDamageModifier;return e.times(w.mechanics.attackDamage.pointsPerLevel).times(t).times(1+n).round(0,3)}},{key:"maximumDamage",get:function(){var e=this.character().powerLevel,t=w.combat.defaultMaximumDamageMultiplier,n=this.character().attributes.brutality*w.combat.attributeDamageModifier;return e.times(w.mechanics.attackDamage.pointsPerLevel).times(t).times(1+n).round(0,3)}},{key:"canAct",get:function(){return!0}}]),e}();var E=function(){function e(t){Object(b.a)(this,e),this.party=t.party,this.hp=t.hp,this._speed=t.speed,this._fatigue=0,this.lastActed=0,this.modifiers=[]}return Object(h.a)(e,[{key:"speed",get:function(){var e=this._speed;return this.modifiers.reduce((function(e,t){if(t.effects.speed){var n=t.effects.speed.percent.plus(100)/100;return e.mul(n)}return e}),e)}},{key:"fatigue",get:function(){return this._fatigue},set:function(e){this._fatigue=e}},{key:"canAct",get:function(){return this.modifiers.reduce((function(e,t){return void 0===t.effects.stunned&&e}),!0)}}]),e}(),T=n(108),M=n(285)("hell-conquest-".concat(T.version));function C(e,t,n,r){var a=e.attributes[w.mechanics.attack.baseAttribute].times(w.mechanics.attack.scale),i=R(t).attributes[w.mechanics.evasion.baseAttribute].times(w.mechanics.evasion.scale).minus(S()(w.mechanics.fatigue.penaltyPerPoint).times(n.combatantCombatStats[t].fatigue));if("Big"!==i.constructor.name)throw new Error("Evasion had the wrong type");k("Making an attack roll. Attacker Accuracy:",a.toFixed(),"Target Evasion:",i.toFixed());var c=Math.floor(100*r.double());return{rawRoll:c,attackAccuracy:a,targetEvasion:i,total:a.minus(i).plus(c)}}var P=N();function H(){return P}function F(){window.localStorage.setItem(M,JSON.stringify(P))}function N(e){var t=window.localStorage.getItem(M);return t?JSON.parse(t,J):{debug:{creatures:{},regions:{}},passivePowerIncome:S()(0),unlockedMonsters:{},paused:!0,currentAction:null,nextAction:null,id:0,startingPower:S()(0),startingTraits:{},currentEncounter:null,manualSpeedMultiplier:w.manualSpeedup.multiplier,currentRegion:"forest",actionLog:[],exploration:{explorationTime:15e3,approachTime:15e3,combatTime:1e4,lootingTime:15e3,recoveryTime:2e3,fleeingTime:15e3,intimidateTime:15e3,reincarnationTime:1},characters:{0:new A({id:0,isPc:!0,name:"You",powerLevel:S()(1),absorbedPower:S()(0),appearance:"",statuses:{},traits:{},items:[],attributes:{brutality:S()(0),cunning:S()(0),deceit:S()(0),madness:S()(0)},combat:{fatigue:0,minimumDamageMultiplier:.5,medianDamageMultiplier:1,maximumDamageMultiplier:1.5}})},tutorials:{}}}function R(e){return function(e){if(!P.characters[e])throw new Error("No creature exists for '".concat(e,"'"))}(e),P.characters[e]}var I=1;function B(e){return O(e),"monsters/".concat(x[e].texture)}function W(e,t,n,r,a){if("object"!==typeof n)throw new Error("Acting character was not an object!");if("number"!==typeof r)throw new Error("Target character was not an object!");var i,c=Math.floor(100*a.double());c<=20?(i=n.combat.minimumDamage,k("Tick ".concat(e,": Damage roll ").concat(c,", a glancing hit for ").concat(i,"."))):c<=80?(i=n.combat.medianDamage,k("Tick ".concat(e,": Damage roll ").concat(c,", a solid hit for ").concat(i,"."))):(i=n.combat.maximumDamage,k("Tick ".concat(e,": Damage roll ").concat(c,", a critical hit for ").concat(i,".")));var s={baseDamage:i,attackerDamageMultiplier:S()(n.attributes[w.mechanics.attackDamage.baseAttribute]).times(w.mechanics.attackDamage.scale),targetDefenseMultiplier:S()(R(r).attributes[w.mechanics.defense.baseAttribute]).times(w.mechanics.defense.scale),otherEffects:[]};Object.keys(n.traits).forEach((function(i){return K(n,r,y(i),n.traits[i],"on_hitting",{combat:t,attack:s},e,a)}));var o=s.baseDamage.times(s.attackerDamageMultiplier.minus(s.targetDefenseMultiplier).div(100).plus(1)).round(0,0);k("Damage started off as ".concat(s.baseDamage.toFixed(),", with an attacker multiplier of ").concat(s.attackerDamageMultiplier," and a target defense multiplier of ").concat(s.targetDefenseMultiplier,", for a total of ").concat(o.toFixed())),t.combatantCombatStats[r].hp=t.combatantCombatStats[r].hp.minus(i),k("Tick ".concat(e,": Hit did ").concat(o.toFixed(),". Additional effects: ").concat(s.otherEffects.map((function(e){switch(e.event){case"apply_effect":return"Applying effect ".concat(e.effect," with from ").concat(e.source," to ").concat(e.target,".")}})).join(", "),". Target has ").concat(t.combatantCombatStats[r].hp," remaining.")),t.rounds.push(function(e,t,n,r,a){return{uuid:Object(d.v4)(),tick:e,result:"hit",target:n,actor:t,effects:[{event:"damage",value:r,target:n}].concat(Object(u.a)(a))}}(e,n.id,r,o,s.otherEffects))}function $(e,t,n,r,a){t.rounds.push(function(e,t,n){return{uuid:Object(d.v4)(),tick:e,result:"miss",target:n,actor:t,effects:[]}}(e,n.id,r))}function q(e,t,n){t.rounds.push(function(e,t){return{uuid:Object(d.v4)(),tick:e,result:"action_skipped",actor:t,effects:[]}}(e,n.id))}function K(e,t,n,r,a,i,c,s){var o=e.attributes[w.mechanics.traitRank.baseAttribute].times(w.mechanics.traitRank.scale).div(100);if(r=S()(r).plus(S()(r).times(o)).round(0,0),k("Character has a bonus to rank of ".concat(e.attributes.madness.toFixed(),"% from madness, for an effective rank of ").concat(r)),k("Tick ".concat(c,": Determining if trait ").concat(n.name," applies")),n[a]){var u=n[a];void 0!==u.conditions&&k("Trait has conditions"),(void 0===u.conditions||Object.keys(u.conditions).every((function(o){switch(o){case"health_percentage":var l=R("attacker"===u.conditions[o].target?e:t),d=S()(u.conditions[o].below),m=i.combat.combatantCombatStats[l.id].hp,b=l.maximumHp,h=m.mul(100).div(b),g=d.gte(h);return k("Tick ".concat(c,": Target health percentage is ").concat(h,", which is ").concat(g?"":"not"," enough to trigger.")),g;case"chance":var p=G(n[a].conditions[o],{$rank:r}),j=Math.floor(100*s.double())+1;return p>=j?(k("Chance to trigger ".concat(p," with roll ").concat(j,": success")),!0):(k("Chance to trigger ".concat(p," with roll ").concat(j,": failure.")),!1);default:return!1}})))&&(k("Tick ".concat(c,": Effect triggered, applying effects")),Object.keys(n[a].effects).forEach((function(s){switch(s){case"damage_modifier":var o=G(n[a].effects[s].percent,{$rank:r});if(o){var u=i.attack.attackerDamageMultiplier.plus(o);k("Tick ".concat(c,": Applying ").concat(o.toFixed()," modifier to damage, changing damage multiplier from ").concat(i.attack.attackerDamageMultiplier.div(100).toFixed()," to ").concat(u.div(100).toFixed())),i.attack.attackerDamageMultiplier=u}break;case"defense_modifier":var l=G(n[a].effects[s].percent,{$rank:r}).div(100),d=i.attack.targetDefenseMultiplier.plus(l);k("Tick ".concat(c,": Applying ").concat(l," modifier to defense, changing defense multiplier from ").concat(i.attack.targetDefenseMultiplier.toFixed()," to ").concat(d.toFixed())),i.attack.targetDefenseMultiplier=d;break;case"add_modifier":var b=n[a].effects.add_modifier;Object.keys(b).forEach((function(c){var s=b[c].target,o={effects:Object(g.a)({},c,{percent:G(b[c].percent,{$rank:r})}),roundDuration:G(n[a].duration.rounds,{$rank:r}),source:{character:e.id,ability:n}};Object.keys(i.combat.combatantCombatStats).filter((function(n){switch(s){case"attacker":return e.id==n;case"attacked":return t==n;case"all_enemies":return(0===e.id?0:1)!==i.combat.combatantCombatStats[n].party;default:throw new Error}})).forEach((function(t){var c=i.combat.combatantCombatStats[t].modifiers.find((function(t){return t.source.character===e.id&&t.source.ability===n}));c?c.roundDuration=G(n[a].duration.rounds,{$rank:r}):i.combat.combatantCombatStats[t].modifiers.push(o),m.get(i,"attack.otherEffects",[]).push({event:"add_modifier",source:e.id,target:t,effect:o})}))}))}})))}return i}var U={};function G(e,t){return null===e||void 0===e?e:(U[e]||(U[e]=new Function("$rank","return ".concat(e))),U[e].call(null,t.$rank))}function Y(e){return S()(e.minus(1).pow(2).times(5))}function z(e){return S()(0).eq(e)?S()(1):e.plus(1).div(5).sqrt().round(0,3)}function J(e,t){switch(e){case"_attributes":case"startingTraits":case"traits":return Object.keys(t).reduce((function(e,n){return e[n]=S()(t[n]),e}),{});case"startingPower":case"minLevel":case"maxLevel":return S()(t);case"characters":return Object.keys(t).reduce((function(e,n){return e[n]=new A(t[n]),e}),{});case"enemies":return Object.keys(t).map((function(e){return new A(t[e])}));case"paused":return!1;case"passivePowerIncome":return S()(t);case"value":var n=Number.parseFloat(t);return Number.isNaN(n)?t:S()(t);default:return t}}var V=function(){function e(t,n,r,a){Object(b.a)(this,e),this.name=t,this.encounters=r,this.background=a}return Object(h.a)(e,[{key:"startEncounter",value:function(e,t){var n=m.get(H(),["debug","encounters","minLevel"],S()(1)),r=m.get(H(),["debug","encounters","maxLevel"],e.powerLevel.plus(2*w.encounters.greaterLevelScale));w.debug&&k("Generating an encounter between ".concat(n.toFixed()," and ").concat(r.toFixed()," "));var a=n.toNumber()+Math.floor(t.double()*(r.toNumber()-n.toNumber())),i=S()(Math.max(1,a));w.debug&&k("Generated encounter level is ".concat(i));var c=function(e){var t=Object.keys(e.encounters).filter((function(t){k("Determining if '".concat(t,"' is enabled."));var n=!1!==e.encounters[t].enabled;n||k("Encounter '".concat(t,"' disabled"));var r=!1!==m.get(H(),["debug","regions",e.id,"encounters",t]);return r||k("Encounter '".concat(t,"' disabled by debug.")),n&&r})),n=t[Math.floor(Math.random()*Object.keys(t).length)];return k("Selected encounter '".concat(n,"'")),e.encounters[n]}(this);if(void 0===c)throw new Error("No encounter selected");return Object(o.a)(Object(o.a)({encounterLevel:i},c),{},{pendingActions:[],enemies:c.enemies.flatMap((function(e){return m.range(0,e.count).map((function(t){return function(e,t,n){if(O(e),w.debug&&k("Generating creature with id ".concat(e," and level ").concat(t)),void 0===t)throw new Error("No powerLevel");if(Number.isNaN(t))throw new Error("Level cannot be NaN");var r=I++;return P.characters[r]=new A(Object(o.a)(Object(o.a)({id:r},x[e]),{},{traits:x[e].traits.reduce((function(e,n){return e[n]=t,e}),{}),absorbedPower:Y(t),artifacts:[],statuses:[],attributes:{brutality:S()(0),cunning:S()(0),deceit:S()(0),madness:S()(0)},combat:{fatigue:0,minimumDamageMultiplier:.5,medianDamageMultiplier:1,maximumDamageMultiplier:1.5}})),F(),P.characters[r]}(e.name,i)}))}))})}}]),e}(),X={forest:new V("The Prey's Lament",!0,{bloodthirstyKnight:{description:"1 Bloodthirsty Knight",type:"combat",enemies:[{name:"bloodthirstyKnight",count:1}]},rapaciousHighwayman:{description:"1 Rapacious Highwayman",type:"combat",enabled:!1,enemies:[{name:"rapaciousHighwayman",count:1}]},crushingSnake:{description:"1 Crushing Snake",type:"combat",enemies:[{name:"crushingSnake",count:1}]},skitteringHorror:{description:"1 Skittering Horror",type:"combat",enemies:[{name:"skitteringHorror",count:1}]},deadlyHornet:{description:"1 Deadly Hornet",type:"combat",enemies:[{name:"deadlyHornet",count:1}]}},{background:"backgrounds/parallax-demon-woods-bg.png",far:"backgrounds/parallax-demon-woods-far-trees.png",mid:"backgrounds/parallax-demon-woods-mid-trees.png",close:"backgrounds/parallax-demon-woods-close-trees.png"}),caves:new V("The Bottomless Caverns",!1,{},{}),mountains:new V("The Crags of Futility",!1,{},{}),desert:new V("The Desert of Isolation",!1,{},{})};var Z={exploring:{id:"exploring",duration:"exploration.explorationTime",description:"Exploring..."},approaching:{id:"approaching",duration:"exploration.approachTime",description:"Approaching Enemy..."},looting:{id:"looting",duration:"exploration.lootingTime",description:"Looting the body..."},fleeing:{id:"fleeing",duration:"exploration.fleeingTime",description:"Fleeing in terror!"},fighting:{id:"fighting",duration:"exploration.combatTime",description:"In Combat!"},reincarnating:{id:"resurrecting",duration:"exploration.reincarnationTime",description:"Reincarnating..."},recovering:{id:"recovering",duration:"exploration.recoveryTime",description:"Healing..."},intimidating:{id:"intimidating",duration:"exploration.intimidateTime",description:"Intimidating..."}},Q=n(168),ee=n(337),te=n(329),ne=n(336),re=n(173),ae=n.n(re),ie=n(174),ce=n.n(ie),se=n(339);function oe(e){var t=Object(a.useRef)(H()),n=Object(ee.d)(),i=R(0),c=x[i.appearance]||{},s=Object(a.useState)(Object.keys(i.attributes).reduce((function(e,t){return e[t.substring(1)]=i.attributes[t],e}),{})),u=Object(l.a)(s,2),d=u[0],b=u[1],h=t.current.startingPower.plus(i.powerLevel.minus(1).pow(2)),p=z(h).times(w.characters.player.attributesPerLevel);return Object(a.useEffect)((function(){H().paused=!0}),[]),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsx)("strong",{children:"Reincarnate"})}),Object(r.jsxs)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:["Select a soul to reincarnate as.",Object(r.jsx)("br",{}),"You will reincarnate with ",Object(r.jsx)("strong",{children:h.toFixed()})," starting power, letting you start at level ",z(h).toFixed(),Object(r.jsx)("br",{}),"You will also gain the following Traits as a result of your previous reincarnations:",Object(r.jsx)(te.a,{container:!0,children:m.uniq(Object.keys(t.current.startingTraits).concat(c.traits||[])).map((function(e){var n=R(0),a=m.get(t.current.startingTraits,e,Object(_.Big)(0)),i=n.powerLevel.gt(a)?n.powerLevel:a;return Object(r.jsx)(te.a,{item:!0,xs:1,children:Object(r.jsx)(se.a,{title:Object(r.jsx)("div",{dangerouslySetInnerHTML:{__html:v[e].description({rank:i})}}),children:Object(r.jsx)("img",{src:v[e].icon})})})}))})]}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsxs)("strong",{children:["Spend ",p.toFixed()," ",i.powerLevel.gt(1)?"points":"point"," on bonuses:"]})}),Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsx)("strong",{children:"Attributes"})}),Object.keys(w.attributes).map((function(e){return Object(r.jsx)(te.a,{item:!0,xs:3,children:Object(r.jsx)(se.a,{title:w.attributes[e].description({rank:d[e].toFixed()}),children:Object(r.jsxs)("div",{style:{textAlign:"center"},children:[Object(r.jsx)("img",{src:w.attributes[e].icon}),Object(r.jsxs)("div",{children:[Object(r.jsx)(ne.a,{disabled:p.eq(m.sum(Object.values(d).map((function(e){return e.toNumber()})))),onClick:function(){b(Object(o.a)(Object(o.a)({},d),{},Object(g.a)({},e,d[e].plus(1))))},children:Object(r.jsx)(ae.a,{})}),d[e].toFixed(),Object(r.jsx)(ne.a,{disabled:d[e].toNumber()<=0,onClick:function(){b(Object(o.a)(Object(o.a)({},d),{},Object(g.a)({},e,d[e].minus(1))))},children:Object(r.jsx)(ce.a,{})})]})]})})})}))]}),Object(r.jsxs)(te.a,{container:!0,item:!0,xs:12,alignItems:"stretch",justify:"flex-start",children:[Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsx)("strong",{children:"Choose a demon to reincarnate as."})}),Object.keys(x).filter((function(e){var t=!1!==x[e].enabled,n=m.get(H(),["debug","creatures",e,"enabled"],!0);return t&&n})).map((function(t){return H().unlockedMonsters[t]?Object(r.jsxs)(te.a,{item:!0,container:!0,xs:3,justify:"space-around",children:[Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsx)(se.a,{title:Object(r.jsx)("div",{children:x[t].description}),children:Object(r.jsx)(ne.a,{variant:"contained",style:{height:"100%",width:"50%"},onClick:function(){e.reincarnate(t,d),n.push("/adventuring")},children:Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,children:Object(r.jsx)("img",{src:B(t)})}),Object(r.jsx)(te.a,{item:!0,xs:12,children:x[t].name})]})})})}),x[t].traits.map((function(e){return Object(r.jsx)(te.a,{item:!0,xs:1,children:Object(r.jsx)(se.a,{title:Object(r.jsx)("div",{dangerouslySetInnerHTML:{__html:v[e].description({rank:z(h)})}}),children:Object(r.jsx)("img",{src:v[e].icon})})})}))]}):Object(r.jsx)(te.a,{item:!0,container:!0,xs:3,justify:"space-around",style:{height:"138px"},children:Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center",height:"64%"},children:Object(r.jsx)(se.a,{title:Object(r.jsx)("div",{children:"An unknown type of Demon. Selects a random Demon you have not already played as."}),children:Object(r.jsx)(ne.a,{variant:"contained",style:{height:"100%",width:"50%"},onClick:function(){e.reincarnate("random",d),n.push("/adventuring")},children:Object(r.jsx)(te.a,{container:!0,children:Object(r.jsx)(te.a,{item:!0,xs:12,children:"???"})})})})})})}))]})]})}var ue=n(334);function le(e){var t=Object(a.useMemo)((function(){return e.powerLevel.toFixed()}),[e.powerLevel]);return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(te.a,{item:!0,xs:6,children:"Level"}),Object(r.jsx)(te.a,{item:!0,xs:6,children:t})]})}var de=n(340);function me(e){return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsxs)(te.a,{item:!0,container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:6,children:"Health"}),Object(r.jsxs)(te.a,{item:!0,xs:5,children:[e.character.currentHp.toFixed()," / ",e.character.maximumHp.toFixed()]}),Object(r.jsx)(te.a,{item:!0,xs:1,children:Object(r.jsx)(se.a,{title:Object(r.jsx)("span",{children:"Health is how much damage needed to destroy you. If you die, you forcibly reincarnate."}),children:Object(r.jsx)(de.a,{})})})]}),Object(r.jsxs)(te.a,{item:!0,container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:6,children:w.attributes.brutality.label}),Object(r.jsx)(te.a,{item:!0,xs:5,title:"",children:e.character.attributes.brutality.toFixed()}),Object(r.jsx)(te.a,{item:!0,xs:1,children:Object(r.jsx)(se.a,{title:Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:w.attributes.brutality.description({rank:e.character.attributes.brutality.toNumber()})}}),children:Object(r.jsx)(de.a,{})})})]}),Object(r.jsxs)(te.a,{item:!0,container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:6,children:w.attributes.cunning.label}),Object(r.jsx)(te.a,{item:!0,xs:5,children:e.character.attributes.cunning.toFixed()}),Object(r.jsx)(te.a,{item:!0,xs:1,children:Object(r.jsx)(se.a,{title:Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:w.attributes.cunning.description({rank:e.character.attributes.cunning.toNumber()})}}),children:Object(r.jsx)(de.a,{})})})]}),Object(r.jsxs)(te.a,{item:!0,container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:6,children:w.attributes.deceit.label}),Object(r.jsx)(te.a,{item:!0,xs:5,children:e.character.attributes.deceit.toFixed()}),Object(r.jsx)(te.a,{item:!0,xs:1,children:Object(r.jsx)(se.a,{title:Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:w.attributes.deceit.description({rank:e.character.attributes.deceit.toNumber()})}}),children:Object(r.jsx)(de.a,{})})})]}),Object(r.jsxs)(te.a,{item:!0,container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:6,children:w.attributes.madness.label}),Object(r.jsx)(te.a,{item:!0,xs:5,children:e.character.attributes.madness.toFixed()}),Object(r.jsx)(te.a,{item:!0,xs:1,children:Object(r.jsx)(se.a,{title:Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:w.attributes.madness.description({rank:e.character.attributes.madness.toNumber()})}}),children:Object(r.jsx)(de.a,{})})})]})]})}function be(e){return Object(r.jsx)(i.a.Fragment,{children:Object.keys(e.character.traits).map((function(t){return Object(r.jsx)(se.a,{title:Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsxs)("span",{children:["Rank ",e.character.traits[t].toFixed(),": "]}),Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:v[t].description({rank:e.character.traits[t]})}})]}),children:Object(r.jsx)("img",{src:v[t].icon})},t)}))})}function he(e){var t=Object(a.useMemo)((function(){return B(e.character.appearance)}),[e.character.appearance]),n=e.character.combat.minimumDamageWeight.plus(e.character.combat.medianDamageWeight).plus(e.character.combat.maximumDamageWeight);return Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,children:Object(r.jsx)("img",{src:t,style:{height:"75px"}})}),Object(r.jsx)(te.a,{item:!0,container:!0,children:Object(r.jsx)(le,{powerLevel:e.character.powerLevel})}),void 0!==e.character.absorbedPower&&Object(r.jsx)(te.a,{item:!0,xs:12,children:Object(r.jsx)("progress",{value:e.character.absorbedPower.minus(Y(e.character.powerLevel)).div(Y(e.character.powerLevel.plus(1))).mul(100).toNumber(),max:100,title:"".concat(e.character.absorbedPower.toFixed(),"/").concat(Y(e.character.powerLevel.plus(1)).toFixed())})}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,container:!0,children:Object(r.jsx)(te.a,{item:!0,xs:!0,children:Object(r.jsx)("strong",{children:"Combat Attributes"})})}),Object(r.jsx)(me,{character:e.character})]}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,children:Object(r.jsx)("strong",{children:"Derived"})}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:4,children:"Glancing Blow"}),Object(r.jsxs)(te.a,{item:!0,xs:4,children:[e.character.combat.minimumDamageWeight.div(n).times(100).toFixed(),"%"]}),Object(r.jsx)(te.a,{item:!0,xs:4,children:e.character.combat.minimumDamage.toFixed()})]}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:4,children:"Solid Hit"}),Object(r.jsxs)(te.a,{item:!0,xs:4,children:[e.character.combat.medianDamageWeight.div(n).times(100).toFixed(),"%"]}),Object(r.jsx)(te.a,{item:!0,xs:4,children:e.character.combat.medianDamage.toFixed()})]}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:4,children:"Critical Hit"}),Object(r.jsxs)(te.a,{item:!0,xs:4,children:[e.character.combat.maximumDamageWeight.div(n).times(100).toFixed(),"%"]}),Object(r.jsx)(te.a,{item:!0,xs:4,children:e.character.combat.maximumDamage.toFixed()})]})]}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,children:Object(r.jsx)("strong",{children:"Traits"})}),Object(r.jsx)(be,{character:e.character})]}),w.artifacts.enabled&&Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,children:Object(r.jsx)("strong",{children:"Artifacts"})}),Object(r.jsx)(te.a,{children:JSON.stringify(e.character.items)})]})]})}var ge={root:{width:"25%",backgroundColor:"#eeeeee"}};function pe(e){return Object(r.jsx)(ue.a,{style:ge.root,elevation:2,children:Object(r.jsx)(he,{character:e.player})})}var je={root:{height:"100%",display:"flex",flex:"0"},buttons:{width:"100%"}};function fe(e){var t=Object(ee.d)(),n=Object(a.useMemo)((function(){return z(H().startingPower).lt(R(0).powerLevel)}),[H().powerLevel,R(0).powerLevel]);return Object(r.jsx)("div",{style:je.root,children:Object(r.jsx)(ne.a,{onClick:function(){return t.push("/reincarnating")},style:je.buttons,variant:"contained",color:"secondary",disabled:!n,children:"Reincarnate"})})}var xe={root:{display:"flex",flex:"1 0 auto",justifyContent:"flex-end",flexDirection:"column"},actions:{container:{display:"flex",justifyContent:"space-between",flexDirection:"row"},buttons:{alignSelf:"flex-end",flex:"1"}},action:{maxHeight:"15%",width:"100%",display:"flex",flexDirection:"column"},actionProgress:{width:"100%"},history:{height:"15%",flexDirection:"column",overflowY:"scroll"}};function Oe(e){if(!e.currentAction)throw new Error("No current action");return Object(r.jsxs)("div",{style:xe.root,onMouseEnter:e.startManualSpeedup,onMouseLeave:e.stopManualSpeedup,children:[Object(r.jsx)(ue.a,{style:xe.actions.container,children:Object(r.jsx)(ne.a,{style:xe.actions.buttons,onClick:function(){H().paused=!H().paused,e.togglePause(H().paused)},children:e.paused?"Unpause":"Pause"})}),Object(r.jsxs)(ue.a,{style:xe.actions.container,children:[ye("fighting","Fight","Combat the enemy. On victory, steal some of the power of the vanquished foe.",e),ye("fleeing","Flee","Attempt to escape. You will automatically escape from Greater Demons.",e),ye("intimidating","Intimidate","Try to cow the enemy, compelling them to continuously provide you a portion of their life force.",e),m.get(w,"features.negotiating.enabled")&&ye("negotiating","Negotiate","Combat the enemy. On victory, steal some of the power of the vanquished foe.",e)]}),Object(r.jsxs)(ue.a,{style:xe.action,children:[Object(r.jsx)("strong",{children:e.currentAction.description}),Object(r.jsx)("progress",{style:xe.actionProgress,value:e.actionTime,max:m.get(e.state,e.currentAction.duration)})]}),Object(r.jsx)(ue.a,{style:xe.history,children:e.actionLog.map((function(e){return function(e){if(e.message)return Object(r.jsx)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(r.jsx)(te.a,{item:!0,xs:11,children:Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:e.message}})})},e.uuid);switch(e.result){case"add_modifier":return Object(r.jsxs)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(r.jsx)(te.a,{item:!0,xs:11,children:"".concat(R(e.actor).name)}),Object(r.jsxs)(te.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"hit":return Object(r.jsxs)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(r.jsxs)(te.a,{item:!0,xs:11,children:[R(e.actor).name," hit! ",e.effects.map((function(t){return ve(e.target,t)})).join(" ")]}),Object(r.jsxs)(te.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"miss":return Object(r.jsxs)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(r.jsxs)(te.a,{item:!0,xs:11,children:[R(e.actor).name," Missed! ",e.effects.map((function(t){return ve(e.target,t)})).join(" ")]}),Object(r.jsxs)(te.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"kill":return Object(r.jsxs)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(r.jsx)(te.a,{item:!0,xs:11,children:Object(r.jsxs)("strong",{children:[R(e.target).name," ",0===e.target?"Were":"Was"," Killed!"]})}),Object(r.jsxs)(te.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"gainedPower":return Object(r.jsx)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(r.jsxs)(te.a,{item:!0,xs:11,children:["You absorbed ",e.value.toFixed()," power."]})},e.uuid);case"healed":return Object(r.jsx)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(r.jsx)(te.a,{item:!0,xs:11,children:"".concat(R(e.target).name," gained ").concat(e.value," health.")})},e.uuid);case"escaped":return Object(r.jsx)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(r.jsx)(te.a,{item:!0,xs:11,children:"You escaped."})},e.uuid);case"action_skipped":return Object(r.jsxs)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(r.jsxs)(te.a,{item:!0,xs:11,children:[R(e.actor).name," ",0===e.actor?"Skip":"Skips"," their action: ",e.reason]}),Object(r.jsx)(te.a,{item:!0,xs:1,children:e.tick})]},e.uuid);case"intimidated":return Object(r.jsx)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(r.jsxs)(te.a,{item:!0,xs:11,children:[R(e.target).name," was Bound to you, granting you ",e.value.toFixed()," power while you explore. "]})},e.uuid);case"enemy-fled":return Object(r.jsx)(te.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(r.jsxs)(te.a,{item:!0,xs:11,children:[R(e.target).name," Fled!"]})},e.uuid)}}(e)}))})]})}function ve(e,t){switch(t.event){case"damage":return"".concat(R(e).name," ").concat(0===e?"take":"takes"," ").concat(t.value," Damage.");default:return Object.keys(t.effect.effects).map((function(e){switch(e){case"speed":var n=Object(_.Big)(t.effect.effects.speed.percent);return n.lt(0)?"".concat(R(t.target).name," ").concat(0==t.target?"suffer":"suffers"," a ").concat(n.toFixed(),"% penalty to Action Speed."):"".concat(R(t.target).name," ").concat(0==t.target?"gain":"gains"," a ").concat(n.toFixed(),"% bonus to Action Speed.")}}))}}function ye(e,t,n,a){return Object(r.jsx)(se.a,{title:n,children:Object(r.jsx)(ne.a,{onClick:function(){return a.setNextAction(e)},style:xe.actions.buttons,disabled:"approaching"!==a.currentAction.id,variant:a.nextActionName===e?"contained":"outlined",color:a.nextActionName===e?"primary":"default",children:t})})}var we={root:{width:"25%",backgroundColor:"#eeeeee"}};function ke(e){return Object(r.jsx)(ue.a,{style:we.root,children:e.currentEncounter&&Object(r.jsx)(he,{character:e.currentEncounter.enemies[0]})})}var _e={root:{display:"flex",flex:"1",flexDirection:"row",justifyContent:"space-between",overflow:"hidden"},image:{position:"absolute",height:"100%",left:0},background:{position:"absolute",height:"100%",width:"100%",left:0}};function Se(e){return Object(r.jsxs)("div",{className:"App",style:_e.root,children:[Object(r.jsxs)("div",{id:"background",style:{position:"absolute",zIndex:"-10",overflow:"hidden",height:"100vh",width:"100vw"},children:[Object(r.jsx)("img",{style:_e.background,src:"./backgrounds/parallax-demon-woods-bg.png"}),Object(r.jsx)("img",{style:_e.image,src:"./backgrounds/parallax-demon-woods-far-trees.png"}),Object(r.jsx)("img",{style:_e.image,src:"./backgrounds/parallax-demon-woods-mid-trees.png"}),Object(r.jsx)("img",{style:_e.image,src:"./backgrounds/parallax-demon-woods-close-trees.png"})]}),Object(r.jsx)(pe,{player:e.player}),Object(r.jsxs)("div",{style:{display:"flex",flex:"1 0 auto",flexDirection:"column"},children:[Object(r.jsx)(fe,{character:R(0)}),Object(r.jsx)(Oe,{state:H(),actionLog:e.actionLog,togglePause:e.togglePause,paused:e.paused,nextActionName:e.nextAction,currentAction:e.currentAction,setNextAction:function(t){e.setNextAction(t),H().nextAction=t},actionTime:e.actionTime,startManualSpeedup:e.startManualSpeedup,stopManualSpeedup:e.stopManualSpeedup})]}),Object(r.jsx)(ke,{currentEncounter:e.currentEncounter,actionLog:e.actionLog})]})}var Ae=n(335),De=n(111),Le=n.n(De),Ee=n(112),Te=n.n(Ee),Me={root:{position:"absolute",minHeight:"100vh",bottom:0,left:0,padding:"20px"}};function Ce(e){var t=Object(a.useState)(m.get(H(),["debug","creatures"])),n=Object(l.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(m.get(H(),["debug","regions"])),u=Object(l.a)(s,2),d=u[0],b=u[1],h=Object(a.useState)(m.get(H(),["debug","encounters","minLevel"],R(0).powerLevel.minus(w.encounters.lesserLevelScale).lt(Object(_.Big)(1))?Object(_.Big)(1):R(0).powerLevel.minus(w.encounters.lesserLevelScale))),p=Object(l.a)(h,2),j=p[0],f=p[1],O=Object(a.useState)(m.get(H(),["debug","encounters","maxLevel"],R(0).powerLevel.plus(w.encounters.greaterLevelScale).gt(100)?Object(_.Big)(100):R(0).powerLevel.plus(2*w.encounters.greaterLevelScale))),v=Object(l.a)(O,2),y=v[0],k=v[1],S=Object(a.useState)(m.get(H(),["debug","manualSpeedMultiplier"],H().manualSpeedMultiplier)),A=Object(l.a)(S,2),D=A[0],L=A[1],E=Object(a.useState)(R(0).absorbedPower),T=Object(l.a)(E,2),C=T[0],F=T[1];return Object(r.jsx)(ue.a,{style:Me.root,disabled:!0,children:Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsx)("h3",{children:"Debug Menu"})}),Object(r.jsxs)(te.a,{item:!0,container:!0,xs:12,children:[Object(r.jsx)(te.a,{item:!0,xs:6,style:{textAlign:"center"},children:Object(r.jsx)(ne.a,{variant:"contained",color:"secondary",onClick:function(){P.debug.creatures={},P.debug.regions={},c(m.get(H(),["debug","creatures"])),b(m.get(H(),["debug","regions"])),f(R(0).powerLevel.minus(w.encounters.lesserLevelScale).lt(Object(_.Big)(1))?Object(_.Big)(1):R(0).powerLevel.minus(w.encounters.lesserLevelScale)),k(R(0).powerLevel.plus(w.encounters.greaterLevelScale).gt(100)?Object(_.Big)(100):R(0).powerLevel.plus(2*w.encounters.greaterLevelScale))},children:"Reset Debug Settings"})}),Object(r.jsx)(te.a,{item:!0,xs:6,style:{textAlign:"center"},children:Object(r.jsx)(ne.a,{variant:"contained",color:"secondary",onClick:function(){window.localStorage.removeItem(M),alert("local storage cleared")},children:"Clear Save"})})]}),Object(r.jsxs)(te.a,{item:!0,xs:12,children:[Object(r.jsx)(te.a,{item:!0,xs:3,children:Object(r.jsx)(Ae.a,{type:"number",value:D,onChange:function(e){var t=Number.parseInt(e.target.value);m.set(H(),["debug","manualSpeedMultiplier"],t),L(t)},label:"Manual speed multiplier"})}),Object(r.jsx)(te.a,{item:!0,xs:3,children:Object(r.jsx)(Ae.a,{type:"number",min:"0",value:C,onChange:function(e){e.target.value=""===e.target.value?0:e.target.value;var t=Object(_.Big)(Number.parseInt(e.target.value));t.lt(0)?(R(0).absorbedPower=Object(_.Big)(0),F(Object(_.Big)(0))):(R(0).absorbedPower=t,F(t))},label:"Current player absorbed power"})})]}),Object(r.jsx)(te.a,{item:!0,xs:12,children:Object(r.jsx)("h3",{children:"Creatures"})}),Object(r.jsx)(te.a,{container:!0,item:!0,xs:12,children:Object.keys(x).map((function(e){var t=!1!==i[e]&&!1!==m.get(i,[e,"enabled"]);return Object(r.jsx)(te.a,{item:!0,xs:3,style:{height:"100%"},children:Object(r.jsxs)(ne.a,{variant:"contained",color:t?"default":"secondary",style:{width:"100%",height:"100%"},onClick:function(){m.set(H(),["debug","creatures",e,"enabled"],!t),c(Object(o.a)(Object(o.a)({},i),{},Object(g.a)({},e,{enabled:!t})))},children:[Object(r.jsx)("img",{src:"/monsters/".concat(x[e].texture)}),x[e].name]})})}))}),Object(r.jsx)(te.a,{item:!0,style:{textAlign:"center"},children:Object(r.jsx)("h4",{children:"Regions"})}),Object(r.jsx)(te.a,{container:!0,item:!0,xs:12,children:Object.keys(X).map((function(e){return Object(r.jsxs)(te.a,{item:!0,xs:6,style:{textAlign:"center"},children:[Object(r.jsx)("h4",{children:X[e].name}),Object(r.jsx)(te.a,{item:!0,container:!0,xs:12,children:Object.keys(X[e].encounters).map((function(t){var n=!1!==m.get(d,[e,"encounters",t,"enabled"]);return Object(r.jsx)(te.a,{item:!0,xs:3,children:Object(r.jsx)(ne.a,{variant:"contained",color:n?"default":"secondary",style:{width:"100%",height:"100%"},onClick:function(){m.set(H(),["debug","regions",e,"encounters",t,"enabled"],!n),b(Object(o.a)(Object(o.a)({},d),{},Object(g.a)({},e,m.set(d[e],["encounters",t,"enabled"],!n))))},children:X[e].encounters[t].description})})}))})]})}))}),Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsx)("h4",{children:"Encounter rules"})}),Object(r.jsxs)(te.a,{container:!0,item:!0,xs:3,children:[Object(r.jsx)(te.a,{item:!0,children:Object(r.jsx)(ne.a,{onClick:function(){f(j.plus(1)),m.set(H(),["debug","encounters","minLevel"],j.plus(1)),j.plus(1).gt(y)&&(k(j.plus(1)),m.set(H(),["debug","encounters","maxLevel"],j.plus(1)))},children:Object(r.jsx)(Le.a,{})})}),Object(r.jsxs)(te.a,{item:!0,children:["Minimum level ",j.toFixed()]}),Object(r.jsx)(te.a,{item:!0,children:Object(r.jsx)(ne.a,{onClick:function(){m.set(H(),["debug","encounters","minLevel"],j.minus(1)),f(j.minus(1))},children:Object(r.jsx)(Te.a,{})})})]}),Object(r.jsxs)(te.a,{container:!0,item:!0,xs:3,children:[Object(r.jsx)(te.a,{item:!0,children:Object(r.jsx)(ne.a,{onClick:function(){k(y.plus(1)),m.set(H(),["debug","encounters","maxLevel"],y.plus(1))},children:Object(r.jsx)(Le.a,{})})}),Object(r.jsxs)(te.a,{item:!0,children:["Maximum level ",y.toFixed()]}),Object(r.jsx)(te.a,{item:!0,children:Object(r.jsx)(ne.a,{onClick:function(){m.set(H(),["debug","encounters","maxLevel"],y.minus(1)),k(y.minus(1)),y.minus(1).lt(j)&&(f(y.minus(1)),m.set(H(),["debug","encounters","minLevel"],y.minus(1)))},children:Object(r.jsx)(Te.a,{})})})]})]})]})})}var Pe=n(113),He=n(108),Fe=n(301);function Ne(e){Object(a.useEffect)((function(){H().paused=!0}));var t=Object(ee.d)();return Object(r.jsx)(ue.a,{children:Object(r.jsxs)(te.a,{container:!0,children:[Object(r.jsxs)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:["Conquest of Hell Ver. ",He.version]}),Object(r.jsx)(te.a,{item:!0,container:!0,children:Object.keys(Fe).map((function(e){return Object(r.jsxs)(te.a,{item:!0,container:!0,xs:12,children:[Object(r.jsx)(te.a,{item:!0,xs:12,children:e}),Object(r.jsx)("ul",{children:Fe[e].map((function(e){return Object(r.jsx)("li",{children:e},e)}))})]},e)}))}),Object(r.jsx)(te.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(r.jsx)(ne.a,{onClick:function(){null===H().currentAction?t.push("/reincarnating"):(H().paused=!1,t.push("/adventuring"))},children:"Start"})})]})})}N();var Re,Ie=Q();function Be(e){return H().currentAction=e,H().currentAction}function We(e){H().actionLog.length>(w.actionLog.maxSize||10)&&H().actionLog.pop(),H().actionLog.unshift(e)}var $e=function(){var e=Object(a.useState)(H().currentEncounter),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(a.useRef)(0),s=Object(a.useRef)(!1),b=Object(a.useState)(0),h=Object(l.a)(b,2),g=h[0],p=h[1],O=Object(a.useState)(Z[H().currentAction]),v=Object(l.a)(O,2),A=v[0],D=v[1],L=Object(a.useState)(H().actionLog),T=Object(l.a)(L,2),M=T[0],N=T[1],I=Object(a.useState)(H().nextAction),B=Object(l.a)(I,2),U=B[0],G=B[1],Y=Object(a.useRef)(R(0)),z=Object(a.useState)(!1),J=Object(l.a)(z,2),V=J[0],Q=J[1],te=Object(a.useState)(H().paused),ne=Object(l.a)(te,2),re=ne[0],ae=ne[1];return Object(Pe.a)("p",(function(){return H().paused=!H().paused})),Object(Pe.a)("`",(function(){Q((function(e){return!!w.debug&&(e||(H().paused=!0,ae(H().paused)),F(),!e)}))})),Object(a.useEffect)((function(){function e(t){switch(We(t),t.result){case"combat-end":Y.current.currentHp<Y.current.maximumHp?D(Z[Be("recovering")]):w.artifacts.enabled?D(Z[Be("looting")]):D(Z[Be("exploring")]),i(H().currentEncounter=null);break;case"kill":"combat-end"===H().currentEncounter.pendingActions[0].result&&(R(0).isDamaged&&(H().nextAction="healing",G(H().nextAction)),e(H().currentEncounter.pendingActions.shift()));var n=R(t.target),r=n.powerLevel.lte(R(0).powerLevel.minus(w.encounters.lesserLevelScale));if(r&&k("Not gaining power because enemy ".concat(t.target," was a Lesser Demon.")),0===t.actor&&0!==t.target&&!r){k("Player killed a non-lesser enemy and gained power.");var a=R(0),c=n.powerLevel.mul(2);a.gainPower(c),We(qe({result:"gainedPower",value:c}))}break;case"hit":case"miss":(t.effects||[]).forEach((function(t){var n=R(t.target);switch(t.event){case"damage":n.currentHp=n.currentHp.minus(t.value),n.currentHp.lt(Object(_.Big)(0))&&(n.currentHp=Object(_.Big)(0)),"kill"===H().currentEncounter.pendingActions[0].result&&e(H().currentEncounter.pendingActions.shift());break;case"apply_effect":n.addModifier({effect:t.effect,magnitude:t.value})}}));break;case"action_skipped":break;default:throw new Error}F()}requestAnimationFrame((function t(n){if(Re){if(!H().paused){if(c.current>=m.get(H(),Z[H().currentAction].duration))switch(F(),c.current=0,H().currentAction){case"exploring":if(R(0).currentHp.lt(R(0).maximumHp))D(Z[Be("recovering")]);else{var r=R(0);H().currentEncounter=X[H().currentRegion].startEncounter(R(0),Ie),i(H().currentEncounter),D(Z[Be("approaching")]),H().nextAction=H().currentEncounter.enemies.reduce((function(e,t){return"fighting"!==e?e:r.otherDemonIsLesserDemon(t)?"intimidating":r.otherDemonIsGreaterDemon(t)?"fleeing":"fighting"}),"fighting"),G(H().nextAction),N(H().actionLog=[]),H().passivePowerIncome.gt(0)&&(R(0).absorbedPower=R(0).absorbedPower.plus(H().passivePowerIncome),We({message:"Your Bound lesser demons grant you ".concat(H().passivePowerIncome.toFixed()," power."),uuid:Object(d.v4)()}));var a=H().currentEncounter.enemies;r.otherDemonIsGreaterDemon(a[0])?We({message:"\ud83d\udc80Approaching Greater ".concat(a[0].name,".\ud83d\udc80"),uuid:Object(d.v4)()}):r.otherDemonIsLesserDemon(a[0])?We({message:"Approaching Lesser ".concat(a[0].name,"."),uuid:Object(d.v4)()}):We({message:"Approaching ".concat(a[0].name,"."),uuid:Object(d.v4)()}),F()}break;case"approaching":var o=R(0);switch(H().nextAction){case"fighting":var l=H().currentEncounter.enemies;(function(e,t){var n=[],r={rounds:[],winner:null,combatantCombatStats:{}};function a(e){return i.apply(this,arguments)}function i(){return(i=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r,m.takeRight(r.rounds)[0]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=m.flatMap(t.parties.map((function(e,t){return e.map((function(e,n){return r.combatantCombatStats[e.id]=new E({hp:e.currentHp,speed:e.speed,party:t}),{character:e,party:t}}))})));k("Beginning combat"),c.forEach((function(t){return Object.keys(t.character.traits).forEach((function(n){c.filter((function(e){return e!==t})).forEach((function(a){K(t.character,a.id,y(n),t.character.traits[n],"on_combat_start",{combat:r},0,e)}))}))}));var s=0,o=function(){var i=Object(f.a)(j.a.mark((function i(){var u,l;return j.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:m.uniq(c.map((function(e){return Math.floor(S()(1e4).div(r.combatantCombatStats[e.character.id].speed).toNumber())}))).sort((function(e,t){return e-t})).forEach((function(i){k("Resolving round on tick ".concat(s)),c.filter((function(e){var t=e.character.alive,n=Math.floor(S()(1e4).div(r.combatantCombatStats[e.character.id].speed).toNumber());return t&&i%n===0})).forEach((function(i){var c=i.character;if(s=r.combatantCombatStats[c.id].lastActed+Math.floor(S()(1e4).div(r.combatantCombatStats[c.id].speed).toNumber()),r.combatantCombatStats[c.id].lastActed=s,k("Tick ".concat(s,": Resolving action by ").concat(c.id,".")),r.combatantCombatStats[c.id].hp.lte(0))k("Tick ".concat(s,": Character ").concat(c.id," was dead when their turn to act came up, skipping their action."));else{var o=(i.party+1)%2,u=t.parties[o].filter((function(e){return r.combatantCombatStats[e.id].hp.gt(0)})),l=m.get(u[Math.floor(e.double()*u.length)],"id");if(void 0!==l){if(r.combatantCombatStats[c.id].canAct){k("Tick ".concat(s,": Attacking ").concat(l));var b=C(c,l,r,e);b.total>=50?(k("Tick ".concat(s,": ").concat(c.id," rolled ").concat(b.total,", a hit.")),W(s,r,c,l,e)):(k("Tick ".concat(s,": ").concat(c.id," rolled ").concat(b.total,", a miss.")),$(s,r,c,l))}else k("".concat(s,": Character skips their action.")),q(s,r,c);n.forEach(a),Object.keys(r.combatantCombatStats).forEach((function(e){r.combatantCombatStats[e].hp.lte(0)&&(k("Tick ".concat(s,": Combatant ").concat(e," died")),r.rounds.push({uuid:Object(d.v4)(),tick:s,actor:c.id,target:Number.parseInt(e),result:"kill"}),n.forEach(a))})),r.combatantCombatStats[i.character.id].fatigue++,r.combatantCombatStats[i.character.id].modifiers=r.combatantCombatStats[i.character.id].modifiers.map((function(e){return e.roundDuration=S()(e.roundDuration).minus(1),e})).filter((function(e){return S()(e.roundDuration).gt(0)}))}else k("Tick ".concat(s,": No valid target, skipping action by ").concat(c.id,"."))}}))})),u=t.parties[0].every((function(e){return r.combatantCombatStats[e.id].hp.lte(0)})),l=t.parties[1].every((function(e){return r.combatantCombatStats[e.id].hp.lte(0)})),u||l?u?(k("Every member of party 0 is dead"),r.rounds.push({uuid:Object(d.v4)(),tick:s,winner:1,result:"combat-end"}),r.winner=1,n.forEach(a)):l&&(k("Every member of party 1 is dead"),r.rounds.push({uuid:Object(d.v4)(),tick:s,winner:0,result:"combat-end"}),r.winner=0,n.forEach(a)):(k("No winner, combat continues"),setTimeout(o));case 5:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();return setTimeout(o),{onRoundResolved:function(){var e=Object(f.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push(t),a(t);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(Ie,{parties:[[o],l]}).onRoundResolved((function(e,t){void 0!==t&&H().currentEncounter.pendingActions.push(t)}))}D(Z[Be(H().nextAction)]),G(),Object.keys(H().characters).filter((function(e){return"0"!==e&&!H().currentEncounter.enemies.find((function(t){return t.id==e}))})).forEach((function(e){delete H().characters[e]}));break;case"intimidating":var b=H().currentEncounter.enemies[0],h=Object(_.Big)(5).times(Object(_.Big)(2).pow(R(0).powerLevel.minus(1).minus(b.powerLevel).toNumber())),g=Math.floor(100*Ie.double())+1;if(h.gte(g)){var x=Object(_.Big)(1);We(qe({result:"intimidated",target:b.id,value:x})),H().passivePowerIncome=H().passivePowerIncome.plus(x)}else We(qe({result:"enemy-fled",target:b.id}));D(Z[Be("exploring")]);break;case"fleeing":var O=R(0),v=H().currentEncounter.enemies[0];H().currentEncounter=null,i(null),D(Z[Be("exploring")]),We({result:"escaped",uuid:Object(d.v4)()}),v.powerLevel.gte(O.powerLevel.plus(w.encounters.greaterLevelScale))&&(O.gainPower(O.powerLevel),We(qe({result:"gainedPower",value:O.powerLevel})));break;case"fighting":if(H().currentEncounter.pendingActions.length)e(H().currentEncounter.pendingActions.shift()),N(Object(u.a)(H().actionLog));else D(Z[Be("fleeing")]);break;case"looting":Math.floor(666*Ie.double());H().currentEncounter.encounterLevel,D(Z[Be("exploring")]);break;case"recovering":var A=R(0);if(A.currentHp.lt(A.maximumHp)){var L=A.currentHp.plus(A.healing).gt(A.maximumHp)?A.maximumHp.minus(A.currentHp):A.currentHp.plus(A.healing);A.currentHp=A.currentHp.plus(L),We({target:A.id,value:L,result:"healed",uuid:Object(d.v4)()})}A.currentHp.gte(A.maximumHp)&&D(Z[Be("exploring")]);break;case"reincarnating":i(),D(Z[Be("exploring")]),N([]),H().actionLog=[];break;default:throw new Error("Action ".concat(H().currentAction," not supported."))}p(c.current);var T=(n-Re)*(s.current?function(){var e=m.get(P,["debug","manualSpeedMultiplier"]),t=P.manualSpeedMultiplier;return e||t}():1);c.current=Math.min(c.current+T,m.get(H(),Z[H().currentAction].duration))}}else Re=n;Re=n,requestAnimationFrame(t),N(Object(u.a)(H().actionLog))}))}),[]),Object(r.jsxs)(ee.a,{initialEntries:["reincarnating"===H().currentAction?"/reincarnatin":"adventuring"===H().currentAction?"/adventuring":"/"],basename:"%PUBLIC_URL%",children:[Object(r.jsxs)(ee.c,{children:[Object(r.jsx)(ee.b,{path:"/",exact:!0,children:Object(r.jsx)(Ne,{})}),Object(r.jsx)(ee.b,{path:"/reincarnating",exact:!0,children:Object(r.jsx)(oe,{reincarnate:function(e,t){!function(e,t){var n=R(0),r=x[n.appearance];if(r&&r.traits.forEach((function(e){P.startingTraits[e]&&!n.powerLevel.gt(P.startingTraits[e])||(P.startingTraits[e]=n.powerLevel)})),"random"===e){var a=m.difference(Object.keys(x).filter((function(e){return m.get(P,["debug","creatures",e,"enabled"],!0)&&!1!==x[e].enabled})),Object.keys(P.unlockedMonsters).filter((function(e){return P.unlockedMonsters[e]})));e=a[Math.floor(Math.random()*a.length)]}Object.keys(n.attributes).forEach((function(e){n.attributes[e]=S()(t[e.substring(1)])})),P.startingPower=P.startingPower.plus(P.characters[0].powerLevel.minus(1).pow(2)),P.characters[0].absorbedPower=P.startingPower,P.characters[0].reincarnate(e,P.startingTraits),P.unlockedMonsters[e]=!0,x[e].traits.forEach((function(e){P.startingTraits[e]&&!n.powerLevel.gt(P.startingTraits[e])||(P.startingTraits[e]=n.powerLevel)})),R(0).traits=Object(o.a)({},P.startingTraits),P.currentEncounter=null,P.currentAction="reincarnating",R(0).currentHp=R(0).maximumHp,H().passivePowerIncome=S()(0),F()}(e,t),D(H().currentAction),P.paused=!1,ae(!1),c.current=1e7}})}),Object(r.jsx)(ee.b,{path:"/adventuring",exact:!0,children:Object(r.jsx)(Se,{player:Y.current,paused:re,togglePause:function(e){return ae(e)},setNextAction:function(e){return G(e)},actionTime:g,currentEncounter:n,startManualSpeedup:function(){s.current=w.manualSpeedup.enabled},stopManualSpeedup:function(){s.current=!1},currentAction:A,nextAction:U,actionLog:M})})]}),V&&Object(r.jsx)(Ce,{})]})};function qe(e){return Object(o.a)({uuid:Object(d.v4)()},e)}var Ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,341)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)($e,{})}),document.getElementById("root")),Ke()}},[[302,1,2]]]);
//# sourceMappingURL=main.638732dd.chunk.js.map