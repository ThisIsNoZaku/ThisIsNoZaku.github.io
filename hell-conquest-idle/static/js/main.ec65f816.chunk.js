(this["webpackJsonpconquest-of-hell-idle"]=this["webpackJsonpconquest-of-hell-idle"]||[]).push([[0],{106:function(e){e.exports=JSON.parse('{"name":"conquest-of-hell-idle","version":"0.1.2","private":true,"homepage":"/hell-conquest-idle/","dependencies":{"@material-ui/core":"^4.11.1","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","cypress":"^6.1.0","decimal.js":"^10.2.1","md5":"^2.3.0","node-uuid":"^1.4.8","react":"^17.0.1","react-circular-progressbar":"^2.0.3","react-dom":"^17.0.1","react-hotkeys-hook":"^2.4.0","react-redux":"^7.2.2","react-router-dom":"^5.2.0","react-scripts":"4.0.1","react-three-fiber":"^5.3.3","redux":"^4.0.5","seedrandom":"^3.0.5","three":"^0.122.0","tween.js":"^16.6.0","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},114:function(e,t,n){},185:function(e,t,n){},190:function(e,t){},192:function(e,t){},203:function(e,t){},205:function(e,t){},232:function(e,t){},234:function(e,t){},235:function(e,t){},240:function(e,t){},242:function(e,t){},261:function(e,t){},273:function(e,t){},276:function(e,t){},290:function(e,t){},296:function(e){e.exports=JSON.parse('{"0.1.0":{"changes":["Initial version"]},"0.1.1":{"changes":["Increased default hit chance from 50% to 90%.","Increased latent power base gain formula from 5 * (level - 1) ^ 2 to 10 * (level - 1) ^ 2.","Changed base hp formula to 50 + (25 * level).","Changed base damage formula to 10 * level.","Accuracy now increases chance of getting a more damaging type of hit and Evasion reduces it.","Player can choose bonus traits as a reincarnation bonus instead of automatically getting all previous traits.","Added a summary section above the action log to easily keep track of player and enemy HP.","Encounter generation logic chooses fights against approximately equal level enemies more often."]},"0.1.2":{"changes":["The player starts with bonus points instead of earning them on the first reincarnation.","Fixed the bonus point calculation and starting traits on the reincarnation page.","Added a new demon: Tormented Dead which inflicts the pain it suffers back on their enemies."]}}')},297:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),i=n.n(r),c=n(13),s=n.n(c),o=(n(185),n(15)),l=n(65),u=n(16),d=(n(114),n(19)),m=n(6),b=(n(279),n(39)),h=n(40),g={bloodthirstyKnight:{name:"Bloodthirsty Knight",traits:["bloodrage"],appearance:"bloodthirstyKnight",texture:"01_warrior.png",description:"A ruthless warrior who delighted in slaughtering whoever they encounter on the battlefield."},rapaciousHighwayman:{name:"Rapacious Highwayman",traits:["cupidity"],enabled:!1,appearance:"rapaciousHighwayman",texture:"02_hunter.png",description:"A thief who stole from whomever he could get away with, from wealthy merchants to starving vagrants."},condemnedSlasher:{name:"Condemned Slasher",traits:["murderousFrenzy"],appearance:"condemnedSlasher",texture:"03_rogue.png",description:"A madman who gained exquisite pleasure from seeing how many cuts could be made in a victim's body before they died."},crushingSnake:{name:"Crushing Snake",traits:["inescapableGrasp"],appearance:"crushingSnake",texture:"06_snake_01.png",description:"A monstrous reptile which"},skitteringHorror:{name:"Skittering Horror",traits:["terrifyingSkitter"],appearance:"skitteringHorror",texture:"10_spider.png",description:"A massive spider that enjoys stalking its prey, frightening it by the sickening skittering of it's arachnid legs."},deadlyHornet:{name:"Deadly Hornet",traits:["piercingStrike"],appearance:"deadlyHornet",texture:"12_wasp.png",description:"An insect whose stinger is able to pierce even metal protection."},tormentedDead:{name:"Tormented Dead",traits:["sharedPain"],appearance:"tormentedDead",texture:"29_zombie.png",description:"A human denied eternal rest and in agony from its ruined flesh."}};function j(e){if(!g[e])throw new Error("No creature with id ".concat(e," is defined"))}console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEBUG_MODE,typeof Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEBUG_MODE);var p={manualSpeedup:{enabled:!0,multiplier:2},artifacts:{enabled:Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FEATURE_ARTIFACTS_ENABLED||!1},actionLog:{maxSize:Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MAX_ACTIONLOG_SIZE||20},encounters:{lesserEncounterChanceWeight:10,greaterEncounterChanceWeight:10,evenEncounterChanceWeight:80,lesserLevelScale:3,greaterLevelScale:1},mechanics:{bonusPointsForHighestLevel:2,xpFromGreaterDemon:"$enemy.powerLevel",levelToPowerEquation:"$level.eq(1) ? Decimal(0) : Decimal(5).pow($level.minus(1).toNumber())",powerToLevelEquation:"Decimal(0).eq($powerPoints) ? Decimal(1) : Decimal.log($powerPoints, 5).plus(1).floor()",latentPowerGainOnReincarnate:"player.powerLevel.minus(1).pow(2).times(10)",maxLevel:100,accuracy:{baseAttribute:"deceit",attributeBonusScale:10},defense:{baseAttribute:"brutality",attributeBonusScale:10},evasion:{baseAttribute:"cunning",attributeBonusScale:10},attackDamage:{pointsPerLevel:10,baseAttribute:"brutality",attributeBonusScale:10},traitRank:{baseAttribute:"madness",attributeBonusScale:10},fatigue:{evasionPenaltyPerPoint:2},hp:{base:50,pointsPerLevel:50,healingPerLevel:100}},attributes:{brutality:{label:"Brutality",globalScaling:1,description:m.template("Brutality is how savage and ruthless a Demon is. It gives a ${5 * rank}% bonus to attack damage, defense and intimidation checks."),icon:"icons/icons-92.png"},cunning:{label:"Cunning",globalScaling:1,description:m.template("Cunning is how quick thinking a Demon is. It gives a ${5 * rank}% bonus to Evasion, and non-combat encounters."),icon:"icons/icons-24.png"},deceit:{label:"Deceit",globalScaling:1,description:m.template("Deceit is how underhanded and manipulative a Demon is. It gives a ${5 * rank}% bonus to Accuracy and social encounters."),icon:"icons/icons-17.png"},madness:{label:"Madness",globalScaling:1,description:m.template("Madness is how disconnected from the limits of reality the Demon is. It gives a ${5 * rank}% bonus to the effect of wielded Artifacts and the effects of Traits."),icon:"icons/icons-124.png"}},combat:{baseHitChance:90,attributeDamageModifier:.02,defaultMinimumDamageMultiplier:.5,defaultMedianDamageMultiplier:1,defaultMaximumDamageMultiplier:1.5,baseMinimumDamageWeight:20,baseMedianDamageWeight:60,baseMaximumDamageWeight:20},debug:"true"===Object({NODE_ENV:"production",PUBLIC_URL:"/hell-conquest-idle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEBUG_MODE};function f(){p.debug&&console.debug.apply(null,arguments)}var x=n(3),O=function(){function e(t){Object(b.a)(this,e),this._isPc=t.isPc||t._isPc,this.id=t.id,this._name=t.name||t._name,this._absorbedPower=Object(x.Decimal)(t.absorbedPower||t._absorbedPower||0),this._latentPower=Object(x.Decimal)(t.latentPower||t._latentPower||0),this._currentHp=Object(x.Decimal)(t._currentHp||this.maximumHp),this._attributes=new v(t.attributes||t._attributes,this),this._combat=new y(t.combat||t._combat,this),this._traits=Object.keys(t.traits||t._traits).reduce((function(e,n){return e[n]=Object(x.Decimal)((t.traits||t._traits)[n]),e}),{}),this._appearance=t.appearance||t._appearance,this._modifiers=t.modifiers||t._modifiers||[]}return Object(h.a)(e,[{key:"reincarnate",value:function(e,t){this._appearance=e,this._traits=t}},{key:"otherDemonIsGreaterDemon",value:function(e){var t=M(p.encounters.greaterLevelScale,{player:this,enemy:e});return e.powerLevel.gte(this.powerLevel.plus(t))}},{key:"otherDemonIsLesserDemon",value:function(e){var t=M(p.encounters.lesserLevelScale,{player:this,enemy:e});return e.powerLevel.lte(this.powerLevel.minus(t))}},{key:"gainPower",value:function(e){return e=e.times(this.latentPower.div(100).plus(1)).floor(),this.absorbedPower=this.absorbedPower.plus(e),e}},{key:"addModifier",value:function(e){this._modifiers.push(e)}},{key:"isPc",get:function(){return this._isPc}},{key:"name",get:function(){return this._name}},{key:"powerLevel",get:function(){return F(this._absorbedPower)}},{key:"currentHp",get:function(){return Object(x.Decimal)(this._currentHp)},set:function(e){this.maximumHp.lt(e)?this._currentHp=this.maximumHp:this._currentHp=e}},{key:"alive",get:function(){return this.currentHp>0}},{key:"latentPower",get:function(){return this._latentPower},set:function(e){this._latentPower=e}},{key:"maximumHp",get:function(){return this.powerLevel.mul(this.latentPower.div(100).plus(1)).mul(p.mechanics.hp.pointsPerLevel).floor()}},{key:"attributes",get:function(){return this._attributes}},{key:"combat",get:function(){return this._combat}},{key:"traits",get:function(){return this._traits},set:function(e){this._traits=e}},{key:"appearance",get:function(){return this._appearance}},{key:"healing",get:function(){return Object(x.Decimal)(this.powerLevel.times(p.mechanics.hp.healingPerLevel))}},{key:"absorbedPower",get:function(){return this._absorbedPower},set:function(e){var t=this;this._absorbedPower=e,F(this._absorbedPower).gt(p.mechanics.maxLevel)&&(this._absorbedPower=H(p.mechanics.maxLevel)),this.appearance&&g[this.appearance].traits.forEach((function(e){t._traits[e]=F(t._absorbedPower),A().unlockedTraits[e]=F(t._absorbedPower)}))}},{key:"speed",get:function(){return Object(x.Decimal)(100)}},{key:"modifiers",get:function(){return this._modifiers}}]),e}(),v=function(){function e(t,n){Object(b.a)(this,e),this._brutality=t.brutality||t._brutality||0,this._cunning=t.cunning||t._cunning||0,this._deceit=t.deceit||t._deceit||0,this._madness=t.madness||t._madness||0,Object.defineProperty(this,"character",{value:function(){return n}})}return Object(h.a)(e,[{key:"brutality",get:function(){var e=this.character().latentPower.div(100).plus(1);return Object(x.Decimal)(this._brutality).times(e).floor()}},{key:"cunning",get:function(){var e=this.character().latentPower.div(100).plus(1);return Object(x.Decimal)(this._cunning).times(e).floor()}},{key:"deceit",get:function(){var e=this.character().latentPower.div(100).plus(1);return Object(x.Decimal)(this._deceit).times(e).floor()}},{key:"madness",get:function(){var e=this.character().latentPower.div(100).plus(1);return Object(x.Decimal)(this._madness).times(e).floor()}}]),e}(),y=function(){function e(t,n){Object(b.a)(this,e),this.character=function(){return n},this.fatigue=0}return Object(h.a)(e,[{key:"getHitChancesAgainst",value:function(e){var t=void 0!==e?e.attributes[p.mechanics.evasion.baseAttribute].times(p.mechanics.evasion.attributeBonusScale):Object(x.Decimal)(0),n=this.character().attributes[p.mechanics.accuracy.baseAttribute].times(p.mechanics.accuracy.attributeBonusScale);return{minimum:Object(x.Decimal)(p.combat.baseMinimumDamageWeight).plus(t.times(2)).floor(),median:Object(x.Decimal)(p.combat.baseMedianDamageWeight).plus(t).plus(n).floor(),max:Object(x.Decimal)(p.combat.baseMaximumDamageWeight).plus(n.times(2)).floor()}}},{key:"minimumDamage",get:function(){return w(p.combat.defaultMinimumDamageMultiplier,this.character().powerLevel,this.character().latentPower,this.character().attributes.brutality)}},{key:"medianDamage",get:function(){return w(p.combat.defaultMedianDamageMultiplier,this.character().powerLevel,this.character().latentPower,this.character().attributes.brutality)}},{key:"maximumDamage",get:function(){return w(p.combat.defaultMaximumDamageMultiplier,this.character().powerLevel,this.character().latentPower,this.character().attributes.brutality)}},{key:"canAct",get:function(){return!0}}]),e}();function w(e,t,n,a){var r=t.times(n.div(100).plus(1)),i=a.times(p.combat.attributeDamageModifier).div(100).plus(1);return r.times(p.mechanics.attackDamage.pointsPerLevel).times(e).times(i).ceil()}var k=n(106),D=n(280)("hell-conquest-".concat(k.version)),S={},_=E();function A(){return _}function L(){window.localStorage.setItem(D,JSON.stringify(_))}function E(e){var t=window.localStorage.getItem(D);return t?JSON.parse(t,R):{debug:{creatures:{},regions:{}},passivePowerIncome:Object(x.Decimal)(0),unlockedMonsters:{},unlockedTraits:{},paused:!0,currentAction:null,nextAction:null,id:0,highestLevelReached:Object(x.Decimal)(1),startingTraits:{},currentEncounter:null,manualSpeedMultiplier:p.manualSpeedup.multiplier,currentRegion:"forest",actionLog:[],exploration:{explorationTime:15e3,approachTime:15e3,combatTime:5e3,lootingTime:15e3,recoveryTime:2e3,fleeingTime:15e3,intimidateTime:15e3,reincarnationTime:1},characters:{0:new O({id:0,isPc:!0,name:"You",powerLevel:Object(x.Decimal)(1),absorbedPower:Object(x.Decimal)(0),appearance:"",statuses:{},traits:{},items:[],attributes:{brutality:Object(x.Decimal)(0),cunning:Object(x.Decimal)(0),deceit:Object(x.Decimal)(0),madness:Object(x.Decimal)(0)},combat:{fatigue:0,minimumDamageMultiplier:.5,medianDamageMultiplier:1,maximumDamageMultiplier:1.5}})},tutorials:{}}}function T(e){return function(e){if(!_.characters[e])throw new Error("No creature exists for '".concat(e,"'"))}(e),_.characters[e]}var P=1;function C(e){return j(e),"monsters/".concat(g[e].texture)}function M(e,t){return null===e||void 0===e?e:(S[e]||(S[e]=new Function("context","with(context) {return ".concat(e,"}"))),t.Decimal=x.Decimal,S[e].call(null,t))}function H(e){return M(p.mechanics.levelToPowerEquation,{$level:Object(x.Decimal)(e)})}function F(e){return M(p.mechanics.powerToLevelEquation,{$powerPoints:Object(x.Decimal)(e)})}function R(e,t){switch(e){case"characters":return Object.keys(t).reduce((function(e,n){return e[n]=new O(t[n]),e}),{});case"enemies":return Object.keys(t).map((function(e){return new O(t[e])}));case"paused":return!1;case"passivePowerIncome":return Object(x.Decimal)(t);case"value":var n=Number.parseFloat(t);return Number.isNaN(n)?t:Object(x.Decimal)(t);default:return t}}var N=function(){function e(t,n,a,r){Object(b.a)(this,e),this.name=t,this.encounters=a,this.background=r}return Object(h.a)(e,[{key:"startEncounter",value:function(e,t){var n,a=p.encounters.lesserEncounterChanceWeight+p.encounters.greaterLevelScale+p.encounters.evenEncounterChanceWeight,r=Math.floor(t.double()*a)+1;n=r<=p.encounters.lesserEncounterChanceWeight?"lesser":r<=p.encounters.lesserEncounterChanceWeight+p.encounters.evenEncounterChanceWeight?"even":"greater";var i=e.powerLevel;switch(n){case"greater":var c=Math.floor(t.double()*p.encounters.greaterLevelScale);i=i.plus(c);break;case"lesser":var s=Math.floor(t.double()*p.encounters.lesserLevelScale);i=x.Decimal.max(1,i.minus(s));break;case"even":var l=Math.max(p.encounters.greaterLevelScale,p.encounters.lesserLevelScale)-Math.min(p.encounters.greaterLevelScale,p.encounters.lesserLevelScale)+1,u=Math.floor(t.double()*l)-l;i=x.Decimal.max(1,i.plus(u))}p.debug&&f("Generated encounter level is ".concat(i));var d=function(e){var t=Object.keys(e.encounters).filter((function(t){f("Determining if '".concat(t,"' is enabled."));var n=!1!==e.encounters[t].enabled;n||f("Encounter '".concat(t,"' disabled"));var a=!1!==m.get(A(),["debug","regions",e.id,"encounters",t]);return a||f("Encounter '".concat(t,"' disabled by debug.")),n&&a})),n=t[Math.floor(Math.random()*Object.keys(t).length)];return f("Selected encounter '".concat(n,"'")),e.encounters[n]}(this);if(void 0===d)throw new Error("No encounter selected");return Object(o.a)(Object(o.a)({encounterLevel:i},d),{},{pendingActions:[],enemies:d.enemies.flatMap((function(e){return m.range(0,e.count).map((function(t){return function(e,t,n){if(j(e),p.debug&&f("Generating creature with id ".concat(e," and level ").concat(t)),void 0===t)throw new Error("No powerLevel");if(Number.isNaN(t))throw new Error("Level cannot be NaN");var a=P++;return _.characters[a]=new O(Object(o.a)(Object(o.a)({id:a},g[e]),{},{latentPower:M(p.mechanics.latentPowerGainOnReincarnate,{player:{powerLevel:t}}).times(5),traits:g[e].traits.reduce((function(e,n){return e[n]=t,e}),{}),absorbedPower:H(t),artifacts:[],statuses:[],attributes:{brutality:t.div(2).floor(),cunning:t.div(2).floor(),deceit:t.div(2).floor(),madness:t.div(2).floor()},combat:{fatigue:0,minimumDamageMultiplier:.5,medianDamageMultiplier:1,maximumDamageMultiplier:1.5}})),L(),_.characters[a]}(e.name,i)}))}))})}}]),e}(),I={forest:new N("The Prey's Lament",!0,{bloodthirstyKnight:{description:"1 Bloodthirsty Knight",type:"combat",enemies:[{name:"bloodthirstyKnight",count:1}]},rapaciousHighwayman:{description:"1 Rapacious Highwayman",type:"combat",enabled:!1,enemies:[{name:"rapaciousHighwayman",count:1}]},crushingSnake:{description:"1 Crushing Snake",type:"combat",enemies:[{name:"crushingSnake",count:1}]},skitteringHorror:{description:"1 Skittering Horror",type:"combat",enemies:[{name:"skitteringHorror",count:1}]},deadlyHornet:{description:"1 Deadly Hornet",type:"combat",enemies:[{name:"deadlyHornet",count:1}]},tormentedDead:{description:"1 Tormented Dead",type:"combat",enemies:[{name:"tormentedDead",count:1}]}},{background:"backgrounds/parallax-demon-woods-bg.png",far:"backgrounds/parallax-demon-woods-far-trees.png",mid:"backgrounds/parallax-demon-woods-mid-trees.png",close:"backgrounds/parallax-demon-woods-close-trees.png"}),caves:new N("The Bottomless Caverns",!1,{},{}),mountains:new N("The Crags of Futility",!1,{},{}),desert:new N("The Desert of Isolation",!1,{},{})};var B={exploring:{id:"exploring",duration:"exploration.explorationTime",description:"Exploring..."},approaching:{id:"approaching",duration:"exploration.approachTime",description:"Approaching Enemy..."},looting:{id:"looting",duration:"exploration.lootingTime",description:"Looting the body..."},fleeing:{id:"fleeing",duration:"exploration.fleeingTime",description:"Fleeing in terror!"},fighting:{id:"fighting",duration:"exploration.combatTime",description:"In Combat!"},reincarnating:{id:"resurrecting",duration:"exploration.reincarnationTime",description:"Reincarnating..."},recovering:{id:"recovering",duration:"exploration.recoveryTime",description:"Healing..."},intimidating:{id:"intimidating",duration:"exploration.intimidateTime",description:"Intimidating..."}},$=n(166),W=n(334),q=n(24),G=n(326),K=n(333),U=n(171),Y=n.n(U),z=n(172),J=n.n(z),V=n(336),X={bloodrage:{name:"Blood Rage",icon:"icons/icons-139.png",description:m.template("This demon's unquenchable thirst for blood gives a <span style='color: red'>${rank.times(25)}%</span> bonus to Damage against enemies with <span style='color: red'>25% or less</span> health."),on_hitting:{conditions:{health_percentage:{target:"target",below:25}},effects:{damage_modifier:{percent:"$rank.times(25)"}}}},cupidity:{name:"Cupidity",icon:"icons/icons-2503.png",description:m.template("When this demon successfully Intimidates another demon, it gains a <span style='color: red'>${rank}%</span> chance to seize the intimidated demon's Artifacts as though it were killed."),on_intimidate:{conditions:{chance:"$rank"},effects:{steal_item_chance:{target:"enemies"}}}},murderousFrenzy:{name:"Murderous Frenzy",icon:"icons/icons-118.png",description:m.template("After hitting with an attack this Demon frenzies, gaining a <span style='color: orangered'>${rank}%</span> bonus to <span style='color: lightgreen'>Attack Speed</span> for 2 rounds."),on_hitting:{effects:{add_modifier:{speed:{target:"attacker",percent:"$rank"}}},duration:{rounds:2}}},inescapableGrasp:{name:"Inescapable Grasp",icon:"icons/icons-2221.png",description:m.template("You bind your victims when you strike, causing a <span style='color: orangered'>${rank}%</span> penalty to their <span style='color: lightgreen'>Action Speed</span> for 2 rounds."),on_hitting:{effects:{add_modifier:{speed:{target:"attacked",percent:"$rank.times(-1)"}}},duration:{rounds:2}}},terrifyingSkitter:{name:"Terrifying Skitter",icon:"icons/icons-2260.png",description:m.template("The sickening sound of your feet on the ground unnerves even other demons, making the enemy <span style='color: violet'>Terrified</span> for <span style='color: lightblue'>${rank.div(10).round(0, 0).plus(1).toFixed()}</span> round(s), stunning them."),on_combat_start:{effects:{add_modifier:{stunned:{target:"all_enemies"}}},duration:{rounds:"$rank.div(10).round(0, 0).plus(1)"}}},piercingStrike:{name:"Piercing Strike",icon:"icons/icons-113.png",description:m.template("Your relentless attacks are designed to get around the enemy's defenses. Against your attacks the enemy's <span style='color: lightgreen'>Defense</span> is reduced by <span style='color: orangered'>${rank}%</span>"),on_hitting:{effects:{defense_modifier:{percent:"$rank.times(-1)"}}}},sharedPain:{name:"Shared Pain",icon:"icons/icons-146.png",description:m.template("You return the pain of injuries inflicted on you, reflecting <span style='color: orangered'>${rank.times(5).toFixed()}%</span> of the damage back."),on_taking_damage:{effects:{target:"attacker",damage:"$rank.times(5).div(100).times(attackDamage)"}}}};function Z(e){return X[e]}function Q(e){Object(r.useRef)(A());var t=Object(W.d)(),n=T(0),i=Object(r.useState)(Object.keys(n.attributes).reduce((function(e,t){return e[t.substring(1)]=n.attributes[t],e}),{})),c=Object(u.a)(i,2),s=c[0],l=c[1],d=Object(r.useState)(A().startingTraits),b=Object(u.a)(d,2),h=b[0],j=b[1],f=T(0).latentPower.plus(M(p.mechanics.latentPowerGainOnReincarnate,{player:n})),O=Object(x.Decimal)(A().highestLevelReached).times(p.mechanics.bonusPointsForHighestLevel).minus(Object.values(s).reduce((function(e,t){return Object(x.Decimal)(e).plus(t)}))).minus(4*Object.values(h).filter((function(e){return e})).length);return Object(r.useEffect)((function(){A().paused=!0}),[]),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(a.jsx)("strong",{children:"Reincarnate"})}),Object(a.jsxs)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:["Select a soul to reincarnate as.",Object(a.jsx)("br",{}),"You will reincarnate with a ",Object(a.jsxs)("strong",{children:[f.toFixed(),"%"]})," bonus to Attributes, Damage and absorbed power due to your Latent Power acquired from previous reincarnations.",Object(a.jsx)("br",{})]}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:[Object(a.jsxs)("strong",{children:["Spend ",O.toFixed()," ",n.powerLevel.gt(1)?"points":"point"," on bonuses "]})," (Reach higher levels to gain more points)"]}),Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(a.jsx)("strong",{children:"Attributes"})}),Object.keys(p.attributes).map((function(e){return Object(a.jsx)(G.a,{item:!0,xs:3,children:Object(a.jsx)(V.a,{title:p.attributes[e].description({rank:Object(x.Decimal)(s[e]).toFixed()}),children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)("img",{src:p.attributes[e].icon}),Object(a.jsxs)("div",{children:[Object(a.jsx)(K.a,{disabled:O.lte(0),onClick:function(){l(Object(o.a)(Object(o.a)({},s),{},Object(q.a)({},e,Object(x.Decimal)(s[e]).plus(1))))},children:Object(a.jsx)(Y.a,{})}),Object(x.Decimal)(s[e]).toFixed(),Object(a.jsx)(K.a,{disabled:Object(x.Decimal)(s[e]).lte(0),onClick:function(){l(Object(o.a)(Object(o.a)({},s),{},Object(q.a)({},e,Object(x.Decimal)(s[e]).minus(1))))},children:Object(a.jsx)(J.a,{})})]})]})})})})),Object.keys(A().unlockedTraits).length>0&&Object(a.jsxs)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:[Object(a.jsx)("strong",{children:"Bonus Starting Traits"})," (Start with traits in addition to that innate to your new demon form)"]}),Object.keys(A().unlockedTraits).map((function(e){return Object(a.jsx)(G.a,{item:!0,container:!0,xs:3,justify:"space-around",style:{height:"138px"},children:Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center",height:"64%"},children:Object(a.jsx)(K.a,{variant:"contained",color:A().startingTraits[e]?"secondary":"default",disabled:O.lt(4)&&!h[e],onClick:function(){A().startingTraits[e]=!A().startingTraits[e],j(A().startingTraits)},children:Object(a.jsx)(V.a,{title:Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:"Rank ".concat(Object(x.Decimal)(A().unlockedTraits[e]).toFixed(),": ").concat(X[e].description({rank:Object(x.Decimal)(A().unlockedTraits[e])}))}}),children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("img",{src:X[e].icon})}),Object(a.jsxs)(G.a,{item:!0,xs:12,children:[X[e].name," ",Object(x.Decimal)(A().unlockedTraits[e]).toFixed()]}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("em",{children:"4 pts"})})]})})})})})}))]}),Object(a.jsxs)(G.a,{container:!0,item:!0,xs:12,alignItems:"stretch",justify:"flex-start",children:[Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(a.jsx)("strong",{children:"Choose a demon to reincarnate as."})}),Object.keys(g).filter((function(e){var t=!1!==g[e].enabled,n=m.get(A(),["debug","creatures",e,"enabled"],!0);return t&&n})).map((function(n){return A().unlockedMonsters[n]?Object(a.jsx)(G.a,{container:!0,xs:3,justify:"space-around",children:Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center",height:"150px"},children:Object(a.jsx)(V.a,{title:Object(a.jsx)("div",{children:g[n].description}),children:Object(a.jsx)(K.a,{variant:"contained",style:{height:"75%",width:"50%"},onClick:function(){e.reincarnate(n,s),t.push("/adventuring")},children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("img",{src:C(n)})}),Object(a.jsx)(G.a,{item:!0,xs:12,children:g[n].name})]})})})})}):Object(a.jsx)(G.a,{container:!0,xs:3,justify:"space-around",style:{height:"150px"},children:Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center",height:"64%"},children:Object(a.jsx)(V.a,{title:Object(a.jsx)("div",{children:"An unknown type of Demon. Selects a random Demon you have not already played as."}),children:Object(a.jsx)(K.a,{variant:"contained",style:{height:"100%",width:"50%"},onClick:function(){e.reincarnate("random",s),t.push("/adventuring")},children:Object(a.jsx)(G.a,{container:!0,children:Object(a.jsx)(G.a,{item:!0,xs:12,children:"???"})})})})})})}))]})]})}var ee=n(331);function te(e){var t=Object(r.useMemo)((function(){return e.powerLevel.toFixed()}),[e.powerLevel]);return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:"Level"}),Object(a.jsx)(G.a,{item:!0,xs:6,children:t})]})}var ne=n(337);function ae(e){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(G.a,{item:!0,container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:"Health"}),Object(a.jsxs)(G.a,{item:!0,xs:5,children:[e.character.currentHp.toFixed()," / ",e.character.maximumHp.toFixed()]}),Object(a.jsx)(G.a,{item:!0,xs:1,children:Object(a.jsx)(V.a,{title:Object(a.jsx)("span",{children:"Health is how much damage needed to destroy you. If you die, you forcibly reincarnate."}),children:Object(a.jsx)(ne.a,{})})})]}),Object(a.jsxs)(G.a,{item:!0,container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:p.attributes.brutality.label}),Object(a.jsx)(G.a,{item:!0,xs:5,title:"",children:e.character.attributes.brutality.toFixed()}),Object(a.jsx)(G.a,{item:!0,xs:1,children:Object(a.jsx)(V.a,{title:Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:p.attributes.brutality.description({rank:e.character.attributes.brutality.toNumber()})}}),children:Object(a.jsx)(ne.a,{})})})]}),Object(a.jsxs)(G.a,{item:!0,container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:p.attributes.cunning.label}),Object(a.jsx)(G.a,{item:!0,xs:5,children:e.character.attributes.cunning.toFixed()}),Object(a.jsx)(G.a,{item:!0,xs:1,children:Object(a.jsx)(V.a,{title:Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:p.attributes.cunning.description({rank:e.character.attributes.cunning.toNumber()})}}),children:Object(a.jsx)(ne.a,{})})})]}),Object(a.jsxs)(G.a,{item:!0,container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:p.attributes.deceit.label}),Object(a.jsx)(G.a,{item:!0,xs:5,children:e.character.attributes.deceit.toFixed()}),Object(a.jsx)(G.a,{item:!0,xs:1,children:Object(a.jsx)(V.a,{title:Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:p.attributes.deceit.description({rank:e.character.attributes.deceit.toNumber()})}}),children:Object(a.jsx)(ne.a,{})})})]}),Object(a.jsxs)(G.a,{item:!0,container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:p.attributes.madness.label}),Object(a.jsx)(G.a,{item:!0,xs:5,children:e.character.attributes.madness.toFixed()}),Object(a.jsx)(G.a,{item:!0,xs:1,children:Object(a.jsx)(V.a,{title:Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:p.attributes.madness.description({rank:e.character.attributes.madness.toNumber()})}}),children:Object(a.jsx)(ne.a,{})})})]})]})}function re(e){return Object(a.jsx)(i.a.Fragment,{children:Object.keys(e.character.traits).map((function(t){return Object(a.jsx)(V.a,{title:Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)("span",{children:["Rank ",e.character.traits[t].toFixed(),": "]}),Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:X[t].description({rank:Object(x.Decimal)(e.character.traits[t])})}})]}),children:Object(a.jsx)("img",{src:X[t].icon})},t)}))})}function ie(e){var t=Object(r.useMemo)((function(){return C(e.character.appearance)}),[e.character.appearance]),n=e.character.combat.getHitChancesAgainst(e.enemy),i=Object.values(n).reduce((function(e,t){return e.plus(t)})),c=H(e.character.powerLevel),s=H(e.character.powerLevel.plus(1)),o=e.character.absorbedPower.minus(c);return Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("img",{src:t,style:{height:"75px"}})}),Object(a.jsx)(G.a,{item:!0,container:!0,children:Object(a.jsx)(te,{powerLevel:e.character.powerLevel})}),void 0!==e.character.absorbedPower&&Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("progress",{value:o.div(s).times(100).toNumber(),max:100,title:"".concat(o.toFixed(),"/").concat(s.toFixed())})}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,container:!0,children:Object(a.jsx)(G.a,{item:!0,xs:!0,children:Object(a.jsx)("strong",{children:"Combat Attributes"})})}),Object(a.jsx)(ae,{character:e.character})]}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("strong",{children:"Derived"})}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:4,children:"Glancing Blow"}),Object(a.jsxs)(G.a,{item:!0,xs:4,children:[n.minimum.div(i).times(100).round().toFixed(),"%"]}),Object(a.jsx)(G.a,{item:!0,xs:4,children:e.character.combat.minimumDamage.toFixed()})]}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:4,children:"Solid Hit"}),Object(a.jsxs)(G.a,{item:!0,xs:4,children:[n.median.div(i).times(100).round().toFixed(),"%"]}),Object(a.jsx)(G.a,{item:!0,xs:4,children:e.character.combat.medianDamage.toFixed()})]}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:4,children:"Serious Hit"}),Object(a.jsxs)(G.a,{item:!0,xs:4,children:[n.max.div(i).times(100).round().toFixed(),"%"]}),Object(a.jsx)(G.a,{item:!0,xs:4,children:e.character.combat.maximumDamage.toFixed()})]})]}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("strong",{children:"Traits"})}),Object(a.jsx)(re,{character:e.character})]}),p.artifacts.enabled&&Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("strong",{children:"Artifacts"})}),Object(a.jsx)(G.a,{children:JSON.stringify(e.character.items)})]})]})}var ce={root:{width:"25%",backgroundColor:"#eeeeee"}};function se(e){return Object(a.jsx)(ee.a,{style:ce.root,elevation:2,children:Object(a.jsx)(ie,{character:e.player,enemy:e.enemy})})}var oe={root:{height:"100%",display:"flex",flex:"0"},buttons:{width:"100%"}};function le(e){var t=Object(W.d)(),n=Object(r.useMemo)((function(){return T(0).powerLevel.gt(1)}),[T(0).powerLevel]);return Object(a.jsx)("div",{style:oe.root,children:Object(a.jsx)(K.a,{onClick:function(){return t.push("/reincarnating")},style:oe.buttons,variant:"contained",color:"secondary",disabled:!n,children:"Reincarnate"})})}var ue={root:{display:"flex",flex:"1 0 auto",justifyContent:"flex-end",flexDirection:"column"},actions:{container:{display:"flex",justifyContent:"space-between",flexDirection:"row"},buttons:{alignSelf:"flex-end",flex:"1"}},action:{maxHeight:"15%",width:"100%",display:"flex",flexDirection:"column"},actionProgress:{width:"100%"},history:{height:"15%",flexDirection:"column",overflowY:"scroll"},combat:{}};function de(e){if(!e.currentAction)throw new Error("No current action");return Object(a.jsxs)("div",{style:ue.root,onMouseEnter:e.startManualSpeedup,onMouseLeave:e.stopManualSpeedup,children:[Object(a.jsx)(ee.a,{style:ue.actions.container,children:Object(a.jsx)(K.a,{style:ue.actions.buttons,onClick:function(){A().paused=!A().paused,e.togglePause(A().paused)},children:e.paused?"Unpause":"Pause"})}),Object(a.jsxs)(ee.a,{style:ue.actions.container,children:[be("fighting","Fight","Combat the enemy. On victory, steal some of the power of the vanquished foe.",e),be("fleeing","Flee","Attempt to escape. You will automatically escape from Greater Demons.",e),be("intimidating","Intimidate","Try to cow the enemy, compelling them to continuously provide you a portion of their life force.",e),m.get(p,"features.negotiating.enabled")&&be("negotiating","Negotiate","Combat the enemy. On victory, steal some of the power of the vanquished foe.",e)]}),Object(a.jsx)(ee.a,{style:ue.combat.details,children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsxs)(G.a,{item:!0,container:!0,xs:6,direction:"row",children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:"Player"}),Object(a.jsx)(G.a,{item:!0,xs:6,children:Object(a.jsx)("meter",Object(q.a)({style:{width:"80%"},low:33,high:66,optimum:100,min:0,max:100,value:e.player.currentHp.div(e.player.maximumHp).times(100).floor().toNumber()},"max",100))})]}),Object(a.jsxs)(G.a,{item:!0,container:!0,xs:6,direction:"row",children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:Object(a.jsx)("meter",Object(q.a)({style:{width:"80%"},low:33,high:66,optimum:100,min:0,max:100,value:m.get(e.enemy,["currentHp"],Object(x.Decimal)(0)).div(m.get(e.enemy,["maximumHp"],Object(x.Decimal)(1))).times(100).floor().toNumber()},"max",100))}),Object(a.jsx)(G.a,{item:!0,xs:6,children:m.get(e.enemy,"name")})]})]})}),Object(a.jsxs)(ee.a,{style:ue.action,children:[Object(a.jsx)("strong",{children:e.currentAction.description}),Object(a.jsx)("progress",{style:ue.actionProgress,value:e.actionTime,max:m.get(e.state,e.currentAction.duration)})]}),Object(a.jsx)(ee.a,{style:ue.history,children:e.actionLog.map((function(e){return function(e){if(e.message)return Object(a.jsx)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(a.jsx)(G.a,{item:!0,xs:11,children:Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.message}})})},e.uuid);switch(e.result){case"add_modifier":return Object(a.jsxs)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(a.jsx)(G.a,{item:!0,xs:11,children:"".concat(T(e.actor).name)}),Object(a.jsxs)(G.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"hit":return Object(a.jsxs)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(a.jsxs)(G.a,{item:!0,xs:11,children:[T(e.actor).name," hit! ",e.effects.map((function(t){return me(e.target,t)})).join(" ")]}),Object(a.jsxs)(G.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"miss":return Object(a.jsxs)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(a.jsxs)(G.a,{item:!0,xs:11,children:[T(e.actor).name," Missed! ",e.effects.map((function(t){return me(e.target,t)})).join(" ")]}),Object(a.jsxs)(G.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"kill":return Object(a.jsxs)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(a.jsx)(G.a,{item:!0,xs:11,children:Object(a.jsxs)("strong",{children:[T(e.target).name," ",0===e.target?"Were":"Was"," Killed!"]})}),Object(a.jsxs)(G.a,{item:!0,xs:1,children:[e.tick,":"]})]},e.uuid);case"gainedPower":return Object(a.jsx)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(a.jsxs)(G.a,{item:!0,xs:11,children:["You absorbed ",e.value.toFixed()," power."]})},e.uuid);case"healed":return Object(a.jsx)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(a.jsx)(G.a,{item:!0,xs:11,children:"".concat(T(e.target).name," gained ").concat(e.value," health.")})},e.uuid);case"escaped":return Object(a.jsx)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(a.jsx)(G.a,{item:!0,xs:11,children:"You escaped."})},e.uuid);case"action_skipped":return Object(a.jsxs)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:[Object(a.jsxs)(G.a,{item:!0,xs:11,children:[T(e.actor).name," lost ",0===e.actor?"your":"their"," action."]}),Object(a.jsx)(G.a,{item:!0,xs:1,children:e.tick})]},e.uuid);case"intimidated":return Object(a.jsx)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(a.jsxs)(G.a,{item:!0,xs:11,children:[T(e.target).name," was Bound to you, granting you ",e.value.toFixed()," power while you explore. "]})},e.uuid);case"enemy-fled":return Object(a.jsx)(G.a,{container:!0,direction:"row-reverse",style:{textAlign:"center"},children:Object(a.jsxs)(G.a,{item:!0,xs:11,children:[T(e.target).name," Fled!"]})},e.uuid)}}(e)}))})]})}function me(e,t){switch(t.event){case"damage":return"".concat(T(t.target).name," ").concat(0==e?"take":"takes"," ").concat(t.value," Damage.");default:return Object.keys(t.effect.effects).map((function(e){switch(e){case"speed":var n=Object(x.Decimal)(t.effect.effects.speed.percent);return n.lt(0)?"".concat(T(t.target).name," ").concat(0==t.target?"suffer":"suffers"," a ").concat(n.toFixed(),"% penalty to Action Speed."):"".concat(T(t.target).name," ").concat(0==t.target?"gain":"gains"," a ").concat(n.toFixed(),"% bonus to Action Speed.")}}))}}function be(e,t,n,r){return Object(a.jsx)(V.a,{title:n,children:Object(a.jsx)(K.a,{onClick:function(){return r.setNextAction(e)},style:ue.actions.buttons,disabled:"approaching"!==r.currentAction.id,variant:r.nextActionName===e?"contained":"outlined",color:r.nextActionName===e?"primary":"default",children:t})})}var he={root:{width:"25%",backgroundColor:"#eeeeee"}};function ge(e){return Object(a.jsx)(ee.a,{style:he.root,children:e.currentEncounter&&Object(a.jsx)(ie,{enemy:e.player,character:e.currentEncounter.enemies[0]})})}var je={root:{display:"flex",flex:"1",flexDirection:"row",justifyContent:"space-between",overflow:"hidden"},image:{position:"absolute",height:"100%",left:0},background:{position:"absolute",height:"100%",width:"100%",left:0}};function pe(e){return Object(a.jsxs)("div",{className:"App",style:je.root,children:[Object(a.jsxs)("div",{id:"background",style:{position:"absolute",zIndex:"-10",overflow:"hidden",height:"100vh",width:"100vw"},children:[Object(a.jsx)("img",{style:je.background,src:"./backgrounds/parallax-demon-woods-bg.png"}),Object(a.jsx)("img",{style:je.image,src:"./backgrounds/parallax-demon-woods-far-trees.png"}),Object(a.jsx)("img",{style:je.image,src:"./backgrounds/parallax-demon-woods-mid-trees.png"}),Object(a.jsx)("img",{style:je.image,src:"./backgrounds/parallax-demon-woods-close-trees.png"})]}),Object(a.jsx)(se,{player:e.player,enemy:m.get(e,"currentEncounter.enemies[0]")}),Object(a.jsxs)("div",{style:{display:"flex",flex:"1 0 auto",flexDirection:"column"},children:[Object(a.jsx)(le,{character:T(0)}),Object(a.jsx)(de,{state:A(),actionLog:e.actionLog,player:T(0),enemy:m.get(e,["currentEncounter","enemies",0]),togglePause:e.togglePause,paused:e.paused,nextActionName:e.nextAction,currentAction:e.currentAction,setNextAction:function(t){e.setNextAction(t),A().nextAction=t},actionTime:e.actionTime,startManualSpeedup:e.startManualSpeedup,stopManualSpeedup:e.stopManualSpeedup})]}),Object(a.jsx)(ge,{player:e.player,currentEncounter:e.currentEncounter,actionLog:e.actionLog})]})}var fe=n(332),xe=n(109),Oe=n.n(xe),ve=n(110),ye=n.n(ve),we={root:{position:"absolute",minHeight:"100vh",bottom:0,left:0,padding:"20px"}};function ke(e){var t=Object(r.useState)(m.get(A(),["debug","creatures"])),n=Object(u.a)(t,2),i=n[0],c=n[1],s=Object(r.useState)(m.get(A(),["debug","regions"])),l=Object(u.a)(s,2),d=l[0],b=l[1],h=Object(r.useState)(m.get(A(),["debug","encounters","minLevel"],T(0).powerLevel.minus(p.encounters.lesserLevelScale).lt(Object(x.Decimal)(1))?Object(x.Decimal)(1):T(0).powerLevel.minus(p.encounters.lesserLevelScale))),j=Object(u.a)(h,2),f=j[0],O=j[1],v=Object(r.useState)(m.get(A(),["debug","encounters","maxLevel"],T(0).powerLevel.plus(p.encounters.greaterLevelScale).gt(100)?Object(x.Decimal)(100):T(0).powerLevel.plus(2*p.encounters.greaterLevelScale))),y=Object(u.a)(v,2),w=y[0],k=y[1],S=Object(r.useState)(m.get(A(),["debug","manualSpeedMultiplier"],A().manualSpeedMultiplier)),L=Object(u.a)(S,2),E=L[0],P=L[1],C=Object(r.useState)(T(0).absorbedPower),M=Object(u.a)(C,2),H=M[0],F=M[1];return Object(a.jsx)(ee.a,{style:we.root,disabled:!0,children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(a.jsx)("h3",{children:"Debug Menu"})}),Object(a.jsxs)(G.a,{item:!0,container:!0,xs:12,children:[Object(a.jsx)(G.a,{item:!0,xs:6,style:{textAlign:"center"},children:Object(a.jsx)(K.a,{variant:"contained",color:"secondary",onClick:function(){_.debug.creatures={},_.debug.regions={},c(m.get(A(),["debug","creatures"])),b(m.get(A(),["debug","regions"])),O(T(0).powerLevel.minus(p.encounters.lesserLevelScale).lt(Object(x.Decimal)(1))?Object(x.Decimal)(1):T(0).powerLevel.minus(p.encounters.lesserLevelScale)),k(T(0).powerLevel.plus(p.encounters.greaterLevelScale).gt(100)?Object(x.Decimal)(100):T(0).powerLevel.plus(2*p.encounters.greaterLevelScale))},children:"Reset Debug Settings"})}),Object(a.jsx)(G.a,{item:!0,xs:6,style:{textAlign:"center"},children:Object(a.jsx)(K.a,{variant:"contained",color:"secondary",onClick:function(){window.localStorage.removeItem(D),alert("local storage cleared")},children:"Clear Save"})})]}),Object(a.jsxs)(G.a,{item:!0,xs:12,children:[Object(a.jsx)(G.a,{item:!0,xs:3,children:Object(a.jsx)(fe.a,{type:"number",value:E,onChange:function(e){var t=Number.parseInt(e.target.value);m.set(A(),["debug","manualSpeedMultiplier"],t),P(t)},label:"Manual speed multiplier"})}),Object(a.jsx)(G.a,{item:!0,xs:3,children:Object(a.jsx)(fe.a,{type:"number",min:"0",value:H,onChange:function(e){e.target.value=""===e.target.value?0:e.target.value;var t=Object(x.Decimal)(Number.parseInt(e.target.value));t.lt(0)?(T(0).absorbedPower=Object(x.Decimal)(0),F(Object(x.Decimal)(0))):(T(0).absorbedPower=t,F(t))},label:"Current player absorbed power"})})]}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)("h3",{children:"Creatures"})}),Object(a.jsx)(G.a,{container:!0,item:!0,xs:12,children:Object.keys(g).map((function(e){var t=!1!==i[e]&&!1!==m.get(i,[e,"enabled"]);return Object(a.jsx)(G.a,{item:!0,xs:3,style:{height:"100%"},children:Object(a.jsxs)(K.a,{variant:"contained",color:t?"default":"secondary",style:{width:"100%",height:"100%"},onClick:function(){m.set(A(),["debug","creatures",e,"enabled"],!t),c(Object(o.a)(Object(o.a)({},i),{},Object(q.a)({},e,{enabled:!t})))},children:[Object(a.jsx)("img",{src:"./monsters/".concat(g[e].texture)}),g[e].name]})})}))}),Object(a.jsx)(G.a,{item:!0,style:{textAlign:"center"},children:Object(a.jsx)("h4",{children:"Regions"})}),Object(a.jsx)(G.a,{container:!0,item:!0,xs:12,children:Object.keys(I).map((function(e){return Object(a.jsxs)(G.a,{item:!0,xs:6,style:{textAlign:"center"},children:[Object(a.jsx)("h4",{children:I[e].name}),Object(a.jsx)(G.a,{item:!0,container:!0,xs:12,children:Object.keys(I[e].encounters).map((function(t){var n=!1!==m.get(d,[e,"encounters",t,"enabled"]);return Object(a.jsx)(G.a,{item:!0,xs:3,children:Object(a.jsx)(K.a,{variant:"contained",color:n?"default":"secondary",style:{width:"100%",height:"100%"},onClick:function(){m.set(A(),["debug","regions",e,"encounters",t,"enabled"],!n),b(Object(o.a)(Object(o.a)({},d),{},Object(q.a)({},e,m.set(d[e],["encounters",t,"enabled"],!n))))},children:I[e].encounters[t].description})})}))})]})}))}),Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(a.jsx)("h4",{children:"Encounter rules"})}),Object(a.jsxs)(G.a,{container:!0,item:!0,xs:3,children:[Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(K.a,{onClick:function(){O(f.plus(1)),m.set(A(),["debug","encounters","minLevel"],f.plus(1)),f.plus(1).gt(w)&&(k(f.plus(1)),m.set(A(),["debug","encounters","maxLevel"],f.plus(1)))},children:Object(a.jsx)(Oe.a,{})})}),Object(a.jsxs)(G.a,{item:!0,children:["Minimum level ",f.toFixed()]}),Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(K.a,{onClick:function(){m.set(A(),["debug","encounters","minLevel"],f.minus(1)),O(f.minus(1))},children:Object(a.jsx)(ye.a,{})})})]}),Object(a.jsxs)(G.a,{container:!0,item:!0,xs:3,children:[Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(K.a,{onClick:function(){k(w.plus(1)),m.set(A(),["debug","encounters","maxLevel"],w.plus(1))},children:Object(a.jsx)(Oe.a,{})})}),Object(a.jsxs)(G.a,{item:!0,children:["Maximum level ",w.toFixed()]}),Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(K.a,{onClick:function(){m.set(A(),["debug","encounters","maxLevel"],w.minus(1)),k(w.minus(1)),w.minus(1).lt(f)&&(O(w.minus(1)),m.set(A(),["debug","encounters","minLevel"],w.minus(1)))},children:Object(a.jsx)(ye.a,{})})})]})]})]})})}var De=n(111),Se=n(106),_e=n(296);function Ae(e){Object(r.useEffect)((function(){A().paused=!0}));var t=Object(W.d)();return Object(a.jsx)(ee.a,{children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:["Conquest of Hell Ver. ",Se.version," Save Compatibility NOT Guaranteed"]}),Object(a.jsx)(G.a,{item:!0,container:!0,children:Object.keys(_e).map((function(e){return Object(a.jsxs)(G.a,{item:!0,container:!0,xs:12,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:e}),Object(a.jsx)("ul",{children:_e[e].changes.map((function(e){return Object(a.jsx)("li",{children:e},e)}))})]},e)}))}),Object(a.jsx)(G.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(a.jsx)(K.a,{onClick:function(){null===A().currentAction?t.push("/reincarnating"):(A().paused=!1,t.push("/adventuring"))},children:"Start"})})]})})}var Le=function(){function e(t){Object(b.a)(this,e),this.party=t.party,this.hp=t.hp,this._speed=t.speed,this._fatigue=0,this.lastActed=0,this.modifiers=[]}return Object(h.a)(e,[{key:"speed",get:function(){var e=this._speed;return this.modifiers.reduce((function(e,t){if(t.effects.speed){var n=t.effects.speed.percent.plus(100)/100;return e.mul(n)}return e}),e)}},{key:"fatigue",get:function(){return this._fatigue},set:function(e){this._fatigue=e}},{key:"canAct",get:function(){return this.modifiers.reduce((function(e,t){return void 0===t.effects.stunned&&e}),!0)}}]),e}();function Ee(e,t,n,a,r){if("object"!==typeof n)throw new Error("Acting character was not an object!");if("number"!==typeof a)throw new Error("Target character was not an object!");var i,c=n.combat.getHitChancesAgainst(T(a)),s=Math.floor(100*r.double());s<=c.minimum?(i=n.combat.minimumDamage,f("Tick ".concat(e,": Damage roll ").concat(s,", a glancing hit for ").concat(i,"."))):s<=c.median.plus(c.minimum)?(i=n.combat.medianDamage,f("Tick ".concat(e,": Damage roll ").concat(s,", a solid hit for ").concat(i,"."))):(i=n.combat.maximumDamage,f("Tick ".concat(e,": Damage roll ").concat(s,", a critical hit for ").concat(i,".")));var o={baseDamage:i,attackerDamageMultiplier:Object(x.Decimal)(n.attributes[p.mechanics.attackDamage.baseAttribute]).times(p.mechanics.attackDamage.attributeBonusScale),targetDefenseMultiplier:Object(x.Decimal)(T(a).attributes[p.mechanics.defense.baseAttribute]).times(p.mechanics.defense.attributeBonusScale),otherEffects:[]};Object.keys(n.traits).forEach((function(i){return Ce(n,a,Z(i),n.traits[i],"on_hitting",{combat:t,attack:o},e,r)}));var u=o.attackerDamageMultiplier.plus(100).div(x.Decimal.max(o.targetDefenseMultiplier.plus(100),1)),m=o.baseDamage.times(u).floor();f("Damage started off as ".concat(o.baseDamage.toFixed(),", with an attack factor of ").concat(o.attackerDamageMultiplier," and a target defense factor of ").concat(o.targetDefenseMultiplier,", for a total factor of ").concat(u," and a final damage of ").concat(m.toFixed())),t.combatantCombatStats[a].hp=t.combatantCombatStats[a].hp.minus(i),o.finalDamage=m,f("Tick ".concat(e,": Hit did ").concat(m.toFixed(),". Additional effects: ").concat(o.otherEffects.map((function(e){switch(e.event){case"apply_effect":return"Applying effect ".concat(e.effect," with from ").concat(e.source," to ").concat(e.target,".")}})).join(", "),". Target has ").concat(t.combatantCombatStats[a].hp," remaining.")),Object.keys(T(a).traits).forEach((function(i){return Ce(n,a,Z(i),T(a).traits[i],"on_taking_damage",{combat:t,attack:o},e,r)})),o.otherEffects.forEach((function(e){switch(e.event){case"damage":t.combatantCombatStats[e.target].hp=t.combatantCombatStats[e.target].hp.minus(e.value)}})),t.rounds.push(function(e,t,n,a,r){return{uuid:Object(d.v4)(),tick:e,result:"hit",target:n,actor:t,effects:[{event:"damage",value:a,target:n}].concat(Object(l.a)(r))}}(e,n.id,a,m,o.otherEffects))}function Te(e,t,n,a,r){t.rounds.push(function(e,t,n){return{uuid:Object(d.v4)(),tick:e,result:"miss",target:n,actor:t,effects:[]}}(e,n.id,a))}function Pe(e,t,n){t.rounds.push(function(e,t){return{uuid:Object(d.v4)(),tick:e,result:"action_skipped",actor:t,effects:[]}}(e,n.id))}function Ce(e,t,n,a,r,i,c,s){var o=e.attributes[p.mechanics.traitRank.baseAttribute].times(p.mechanics.traitRank.attributeBonusScale).div(100);if(a=x.Decimal.min(Object(x.Decimal)(a).plus(Object(x.Decimal)(a).times(o)).floor(),100),f("Character has a bonus to rank of ".concat(e.attributes.madness.toFixed(),"% from madness, for an effective rank of ").concat(a)),f("Tick ".concat(c,": Determining if trait ").concat(n.name," applies")),n[r]){var l=n[r];void 0!==l.conditions&&f("Trait has conditions"),(void 0===l.conditions||Object.keys(l.conditions).every((function(o){switch(o){case"health_percentage":var u=T("attacker"===l.conditions[o].target?e:t),d=Object(x.Decimal)(l.conditions[o].below),m=i.combat.combatantCombatStats[u.id].hp,b=u.maximumHp,h=m.mul(100).div(b),g=d.gte(h);return f("Tick ".concat(c,": Target health percentage is ").concat(h,", which is ").concat(g?"":"not"," enough to trigger.")),g;case"chance":var j=M(n[r].conditions[o],{$rank:a}),p=Math.floor(100*s.double())+1;return j>=p?(f("Chance to trigger ".concat(j," with roll ").concat(p,": success")),!0):(f("Chance to trigger ".concat(j," with roll ").concat(p,": failure.")),!1);default:return!1}})))&&(f("Tick ".concat(c,": Effect triggered, applying effects")),Object.keys(n[r].effects).forEach((function(s){switch(s){case"damage_modifier":var o=M(n[r].effects[s].percent,{$rank:a});if(o){var l=i.attack.attackerDamageMultiplier.plus(o);f("Tick ".concat(c,": Applying ").concat(o.toFixed()," modifier to damage, changing damage multiplier from ").concat(i.attack.attackerDamageMultiplier.div(100).toFixed()," to ").concat(l.div(100).toFixed())),i.attack.attackerDamageMultiplier=l}break;case"damage":var u=n[r].effects.target,d=M(n[r].effects.damage,{$rank:Object(x.Decimal)(a),attackDamage:i.attack.finalDamage}).floor();if(f("Inflicting ".concat(d," damage to ").concat(u)),d.gt(0))He(e,t,Object.keys(i.combat.combatantCombatStats),u,i).forEach((function(e){i.attack.otherEffects.push({event:"damage",value:d,target:e})}));break;case"defense_modifier":var b=M(n[r].effects[s].percent,{$rank:a}).div(100).plus(1),h=i.attack.targetDefenseMultiplier.times(b);f("Tick ".concat(c,": Applying ").concat(b," modifier to defense, changing defense multiplier from ").concat(i.attack.targetDefenseMultiplier.toFixed()," to ").concat(h.toFixed())),i.attack.targetDefenseMultiplier=h;break;case"add_modifier":var g=n[r].effects.add_modifier;Object.keys(g).forEach((function(c){var s=g[c].target,o={effects:Object(q.a)({},c,{percent:M(g[c].percent,{$rank:a})}),roundDuration:M(n[r].duration.rounds,{$rank:a}),source:{character:e.id,ability:n}};He(e,t,Object.keys(i.combat.combatantCombatStats),s,i).forEach((function(t){var c=i.combat.combatantCombatStats[t].modifiers.find((function(t){return t.source.character===e.id&&t.source.ability===n}));c?c.roundDuration=M(n[r].duration.rounds,{$rank:a}):i.combat.combatantCombatStats[t].modifiers.push(o),m.get(i,"attack.otherEffects",[]).push({event:"add_modifier",source:e.id,target:t,effect:o})}))}))}})))}return i}function Me(e,t,n,a){var r=Object(x.Decimal)(e.attributes[p.mechanics.accuracy.baseAttribute]).times(p.mechanics.accuracy.attributeBonusScale);f("Making an accuracy roll. Attacker Accuracy:",r.toFixed());var i=Math.floor(100*a.double());return{rawRoll:i,attackAccuracy:r,total:r.plus(i)}}function He(e,t,n,a,r){return n.filter((function(n){switch(a){case"attacker":return e.id==n;case"attacked":return t==n;case"all_enemies":return(0===e.id?0:1)!==r.combat.combatantCombatStats[n].party;default:throw new Error}}))}E();var Fe,Re=$();function Ne(e){return A().currentAction=e,A().currentAction}function Ie(e){A().actionLog.length>(p.actionLog.maxSize||10)&&A().actionLog.pop(),A().actionLog.unshift(e)}var Be=function(){var e=Object(r.useState)(A().currentEncounter),t=Object(u.a)(e,2),n=t[0],i=t[1],c=Object(r.useRef)(0),s=Object(r.useRef)(!1),o=Object(r.useState)(0),b=Object(u.a)(o,2),h=b[0],j=b[1],O=Object(r.useState)(B[A().currentAction]),v=Object(u.a)(O,2),y=v[0],w=v[1],k=Object(r.useState)(A().actionLog),D=Object(u.a)(k,2),S=D[0],E=D[1],P=Object(r.useState)(A().nextAction),C=Object(u.a)(P,2),H=C[0],F=C[1],R=Object(r.useRef)(T(0)),N=Object(r.useState)(!1),$=Object(u.a)(N,2),q=$[0],G=$[1],K=Object(r.useState)(A().paused),U=Object(u.a)(K,2),Y=U[0],z=U[1];return Object(De.a)("p",(function(){return A().paused=!A().paused})),Object(De.a)("`",(function(){G((function(e){return!!p.debug&&(e||(A().paused=!0,z(A().paused)),L(),!e)}))})),Object(r.useEffect)((function(){function e(t){switch(Ie(t),t.result){case"combat-end":R.current.currentHp<R.current.maximumHp?w(B[Ne("recovering")]):p.artifacts.enabled?w(B[Ne("looting")]):w(B[Ne("exploring")]),i(A().currentEncounter=null);break;case"kill":"combat-end"===A().currentEncounter.pendingActions[0].result&&(T(0).isDamaged&&(A().nextAction="healing",F(A().nextAction)),e(A().currentEncounter.pendingActions.shift()));var n=T(t.target),a=T(0).otherDemonIsLesserDemon(n);if(a&&f("Not gaining power because enemy ".concat(t.target," was a Lesser Demon.")),0===t.actor&&0!==t.target&&!a){f("Player killed a non-lesser enemy and gained power.");var r=T(0),c=n.powerLevel.mul(2);Ie($e({result:"gainedPower",value:r.gainPower(c)})),A().highestLevelReached=x.Decimal.max(A().highestLevelReached,T(0).powerLevel)}break;case"hit":case"miss":(t.effects||[]).forEach((function(t){var n=T(t.target);switch(t.event){case"damage":n.currentHp=n.currentHp.minus(t.value),n.currentHp.lt(Object(x.Decimal)(0))&&(n.currentHp=Object(x.Decimal)(0)),"kill"===A().currentEncounter.pendingActions[0].result&&e(A().currentEncounter.pendingActions.shift());break;case"apply_effect":n.addModifier({effect:t.effect,magnitude:t.value})}}));break;case"action_skipped":break;default:throw new Error}L()}requestAnimationFrame((function t(n){if(Fe){if(!A().paused){if(c.current>=m.get(A(),B[A().currentAction].duration))switch(L(),c.current=0,A().currentAction){case"exploring":if(T(0).currentHp.lt(T(0).maximumHp))w(B[Ne("recovering")]);else{var a=T(0);if(A().currentEncounter=I[A().currentRegion].startEncounter(T(0),Re),i(A().currentEncounter),w(B[Ne("approaching")]),A().nextAction=A().currentEncounter.enemies.reduce((function(e,t){return"fighting"!==e?e:a.otherDemonIsLesserDemon(t)?"intimidating":a.otherDemonIsGreaterDemon(t)?"fleeing":"fighting"}),"fighting"),F(A().nextAction),E(A().actionLog=[]),A().passivePowerIncome.gt(0)){var r=T(0).gainPower(A().passivePowerIncome);Ie({message:"Your Bound lesser demons grant you ".concat(r.toFixed()," power."),uuid:Object(d.v4)()}),A().highestLevelReached=x.Decimal.max(A().highestLevelReached,T(0).powerLevel)}var o=A().currentEncounter.enemies;a.otherDemonIsGreaterDemon(o[0])?Ie({message:"\ud83d\udc80Approaching Greater ".concat(o[0].name,".\ud83d\udc80"),uuid:Object(d.v4)()}):a.otherDemonIsLesserDemon(o[0])?Ie({message:"Approaching Lesser ".concat(o[0].name,"."),uuid:Object(d.v4)()}):Ie({message:"Approaching ".concat(o[0].name,"."),uuid:Object(d.v4)()}),L()}break;case"approaching":var u=T(0);switch(A().nextAction){case"fighting":var b=A().currentEncounter.enemies,h=function(e,t){var n={rounds:[],winner:null,combatantCombatStats:{}},a=m.flatMap(t.parties.map((function(e,t){return e.map((function(e,a){return n.combatantCombatStats[e.id]=new Le({hp:e.currentHp,speed:e.speed,party:t}),{character:e,party:t}}))})));f("Beginning combat"),a.forEach((function(t){return Object.keys(t.character.traits).forEach((function(r){a.filter((function(e){return e!==t})).forEach((function(a){Ce(t.character,a.id,Z(r),t.character.traits[r],"on_combat_start",{combat:n},0,e)}))}))}));for(var r=0;null===n.winner;){m.uniq(a.map((function(e){return Math.floor(Object(x.Decimal)(1e4).div(n.combatantCombatStats[e.character.id].speed).toNumber())}))).sort((function(e,t){return e-t})).forEach((function(i){a.filter((function(e){var t=e.character.alive,a=Math.floor(Object(x.Decimal)(1e4).div(n.combatantCombatStats[e.character.id].speed).toNumber());return t&&i%a===0})).forEach((function(a){var i=a.character;if(r=n.combatantCombatStats[i.id].lastActed+Math.floor(Object(x.Decimal)(1e4).div(n.combatantCombatStats[i.id].speed).toNumber()),n.combatantCombatStats[i.id].lastActed=r,f("Tick ".concat(r,": Resolving action by character '").concat(i.id,"'.")),n.combatantCombatStats[i.id].hp.lte(0))f("Tick ".concat(r,": Character ").concat(i.id," was dead when their turn to act came up, skipping their action."));else{var c=(a.party+1)%2,s=t.parties[c].filter((function(e){return n.combatantCombatStats[e.id].hp.gt(0)})),o=m.get(s[Math.floor(e.double()*s.length)],"id");if(void 0!==o){if(n.combatantCombatStats[i.id].canAct){f("Tick ".concat(r,": Attacking ").concat(o));var l=Me(i,0,0,e);l.total>=100-p.combat.baseHitChance?(f("Tick ".concat(r,": ").concat(i.id," rolled ").concat(l.total,", a hit.")),Ee(r,n,i,o,e)):(f("Tick ".concat(r,": ").concat(i.id," rolled ").concat(l.total,", a miss.")),Te(r,n,i,o))}else f("".concat(r,": Character skips their action.")),Pe(r,n,i);Object.keys(n.combatantCombatStats).forEach((function(e){n.combatantCombatStats[e].hp.lte(0)&&(f("Tick ".concat(r,": Combatant ").concat(e," died")),n.rounds.push({uuid:Object(d.v4)(),tick:r,actor:i.id,target:Number.parseInt(e),result:"kill"}))})),n.combatantCombatStats[a.character.id].modifiers=n.combatantCombatStats[a.character.id].modifiers.map((function(e){return e.roundDuration=Object(x.Decimal)(e.roundDuration).minus(1),e})).filter((function(e){return Object(x.Decimal)(e.roundDuration).gt(0)}))}else f("Tick ".concat(r,": No valid target, skipping action by ").concat(i.id,"."))}}))}));var i=t.parties[0].every((function(e){return n.combatantCombatStats[e.id].hp.lte(0)})),c=t.parties[1].every((function(e){return n.combatantCombatStats[e.id].hp.lte(0)}));i||c?i?(f("Every member of party 0 is dead"),n.rounds.push({uuid:Object(d.v4)(),tick:r,winner:1,result:"combat-end"}),n.winner=1):c&&(f("Every member of party 1 is dead"),n.rounds.push({uuid:Object(d.v4)(),tick:r,winner:0,result:"combat-end"}),n.winner=0):f("No winner, combat continues")}return n}(Re,{parties:[[u],b]});A().currentEncounter.pendingActions=h.rounds}w(B[Ne(A().nextAction)]),F(),Object.keys(A().characters).filter((function(e){return"0"!==e&&!A().currentEncounter.enemies.find((function(t){return t.id==e}))})).forEach((function(e){delete A().characters[e]}));break;case"intimidating":var g=A().currentEncounter.enemies[0],O=Object(x.Decimal)(5).times(Object(x.Decimal)(2).pow(T(0).powerLevel.minus(1).minus(g.powerLevel).toNumber())),v=Math.floor(100*Re.double())+1;if(O.gte(v)){var y=g.powerLevel;Ie($e({result:"intimidated",target:g.id,value:y})),A().passivePowerIncome=A().passivePowerIncome.plus(y)}else Ie($e({message:"".concat(T(g.id).name," escaped! (You rolled ").concat(v," vs ").concat(O," chance to Bind).")}));w(B[Ne("exploring")]);break;case"fleeing":var k=T(0),D=A().currentEncounter.enemies[0];if(A().currentEncounter=null,i(null),w(B[Ne("exploring")]),Ie({result:"escaped",uuid:Object(d.v4)()}),k.otherDemonIsGreaterDemon(D)){var S=M(p.mechanics.xpFromGreaterDemon,{$enemy:D}),P=k.gainPower(S);A().highestLevelReached=x.Decimal.max(A().highestLevelReached,T(0).powerLevel),Ie($e({result:"gainedPower",value:P}))}break;case"fighting":if(A().currentEncounter.pendingActions.length)e(A().currentEncounter.pendingActions.shift()),E(Object(l.a)(A().actionLog));else w(B[Ne("fleeing")]);break;case"looting":Math.floor(666*Re.double());A().currentEncounter.encounterLevel,w(B[Ne("exploring")]);break;case"recovering":var C=T(0);if(C.currentHp.lt(C.maximumHp)){var H=C.currentHp.plus(C.healing).gt(C.maximumHp)?C.maximumHp.minus(C.currentHp):C.healing;C.currentHp=C.currentHp.plus(H),Ie({target:C.id,value:H,result:"healed",uuid:Object(d.v4)()})}C.currentHp.gte(C.maximumHp)&&w(B[Ne("exploring")]);break;case"reincarnating":i(),w(B[Ne("exploring")]),E([]),A().actionLog=[];break;default:throw new Error("Action ".concat(A().currentAction," not supported."))}j(c.current);var R=(n-Fe)*(s.current?function(){var e=m.get(_,["debug","manualSpeedMultiplier"]),t=_.manualSpeedMultiplier;return e||t}():1);c.current=Math.min(c.current+R,m.get(A(),B[A().currentAction].duration))}}else Fe=n;Fe=n,requestAnimationFrame(t),E(Object(l.a)(A().actionLog))}))}),[]),Object(a.jsxs)(W.a,{initialEntries:["reincarnating"===A().currentAction?"/reincarnatin":"adventuring"===A().currentAction?"/adventuring":"/"],basename:"%PUBLIC_URL%",children:[Object(a.jsxs)(W.c,{children:[Object(a.jsx)(W.b,{path:"/",exact:!0,children:Object(a.jsx)(Ae,{})}),Object(a.jsx)(W.b,{path:"/reincarnating",exact:!0,children:Object(a.jsx)(Q,{reincarnate:function(e,t){!function(e,t){var n=T(0),a=g[n.appearance];if(a&&a.traits.forEach((function(e){_.unlockedTraits[e]&&!n.powerLevel.gt(_.unlockedTraits[e])||(_.unlockedTraits[e]=n.powerLevel)})),Object(x.Decimal)(_.highestLevelReached).lt(n.powerLevel)&&(_.highestLevelReached=n.powerLevel),"random"===e){var r=m.difference(Object.keys(g).filter((function(e){return m.get(_,["debug","creatures",e,"enabled"],!0)&&!1!==g[e].enabled})),Object.keys(_.unlockedMonsters).filter((function(e){return _.unlockedMonsters[e]})));e=r[Math.floor(Math.random()*r.length)]}Object.keys(n.attributes).forEach((function(e){n.attributes[e]=Object(x.Decimal)(t[e.substring(1)])}));var i=M(p.mechanics.latentPowerGainOnReincarnate,{player:n});_.characters[0].latentPower=_.characters[0].latentPower.plus(i),_.characters[0].absorbedPower=Object(x.Decimal)(0),_.characters[0].reincarnate(e,_.startingTraits),_.unlockedMonsters[e]=!0,T(0).traits=Object.keys(_.startingTraits).reduce((function(e,t){return e[t]=_.unlockedTraits[t],e}),{}),g[e].traits.forEach((function(e){T(0).traits[e]=1})),_.currentEncounter=null,_.currentAction="reincarnating",T(0).currentHp=T(0).maximumHp,A().passivePowerIncome=Object(x.Decimal)(0),L()}(e,t),w(A().currentAction),_.paused=!1,z(!1),c.current=1e7}})}),Object(a.jsx)(W.b,{path:"/adventuring",exact:!0,children:Object(a.jsx)(pe,{player:R.current,paused:Y,togglePause:function(e){return z(e)},setNextAction:function(e){return F(e)},actionTime:h,currentEncounter:n,startManualSpeedup:function(){s.current=p.manualSpeedup.enabled},stopManualSpeedup:function(){s.current=!1},currentAction:y,nextAction:H,actionLog:S})})]}),q&&Object(a.jsx)(ke,{})]})};function $e(e){return Object(o.a)({uuid:Object(d.v4)()},e)}var We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,338)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Be,{})}),document.getElementById("root")),We()}},[[297,1,2]]]);
//# sourceMappingURL=main.ec65f816.chunk.js.map